--------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\rayde\Desktop\uninured_bootstrap3.log
  log type:  text
 opened on:   8 Aug 2019, 21:06:08

. 
. load
loaded LM_program.do
loaded stderr_prog.do

. 
. use "C:\Users\rayde\Downloads\h196dat\cleaned_data.dta", clear

. 
. ********************************************************************************
. * Set Global Variables
. ********************************************************************************
. 
. global depvar = "unin"

. global model1 = "age wage military race mz_wage mz_military"

. global model2 = "age wage military race employed mz_wage mz_employed mz_military"

. global model3 = "age military race employed mz_employed mz_military"

. 
. global cooksd = "if cooksd < 4/_N"

. 
. ********************************************************************************
. ********************************************************************************
. *
. * Bootstrap
. *
. ********************************************************************************
. ********************************************************************************
. set seed 12345

. 
. bsample 3946, strata(${depvar})

. 
. local list = "regress logit probit"

. 
. cap drop *_uhat* *_yhat*

. 
. foreach x in `list' {
  2. 
. bootstrap, rep(50) mse: `x' ${depvar} ${model1}
  3. estimates store `x'_1
  4. predict `x'_uhat1, stdp
  5. predict `x'_yhat1
  6. 
. bootstrap, rep(50) mse: `x' ${depvar} ${model2}
  7. estimates store `x'_2
  8. predict `x'_uhat2, stdp
  9. predict `x'_yhat2
 10. 
. bootstrap, rep(50) mse: `x' ${depvar} ${model3}
 11. estimates store `x'_3
 12. predict `x'_uhat3, stdp
 13. predict `x'_yhat3
 14. di "==========================================================================="
 15. }
(running regress on estimation sample)

Bootstrap replications (50)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
.......x.....x....x......................x....x...    50

Linear regression                               Number of obs     =      2,750
                                                Replications      =         45
                                                Wald chi2(4)      =     715.78
                                                Prob > chi2       =     0.0000
                                                R-squared         =     0.1353
                                                Adj R-squared     =     0.1340
                                                Root MSE          =     0.4647

------------------------------------------------------------------------------
             |   Observed   Bstrap *
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0011268   .0009817     1.15   0.251    -.0007972    .0030508
        wage |  -.0150225   .0006982   -21.52   0.000     -.016391    -.013654
    military |  -.3786897   .0803321    -4.71   0.000    -.5361377   -.2212416
        race |   -.050789    .007279    -6.98   0.000    -.0650555   -.0365224
     mz_wage |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .8487996   .0370679    22.90   0.000     .7761478    .9214513
------------------------------------------------------------------------------
Note: One or more parameters could not be estimated in 5 bootstrap replicates;
      standard-error estimates include only complete replications.
(5,142 missing values generated)
(option xb assumed; fitted values)
(5,142 missing values generated)
(running regress on estimation sample)

Bootstrap replications (50)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
................................x.................    50

Linear regression                               Number of obs     =      2,701
                                                Replications      =         49
                                                Wald chi2(4)      =     754.92
                                                Prob > chi2       =     0.0000
                                                R-squared         =     0.1388
                                                Adj R-squared     =     0.1375
                                                Root MSE          =     0.4638

------------------------------------------------------------------------------
             |   Observed   Bstrap *
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0005764   .0007636     0.75   0.450    -.0009203     .002073
        wage |  -.0148912   .0006396   -23.28   0.000    -.0161448   -.0136376
    military |  -.3753818   .0970863    -3.87   0.000    -.5656674   -.1850962
        race |  -.0547479   .0096001    -5.70   0.000    -.0735638   -.0359321
    employed |          0  (omitted)
     mz_wage |          0  (omitted)
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .8745663   .0320582    27.28   0.000     .8117334    .9373992
------------------------------------------------------------------------------
Note: One or more parameters could not be estimated in 1 bootstrap replicate;
      standard-error estimates include only complete replications.
(5,191 missing values generated)
(option xb assumed; fitted values)
(5,191 missing values generated)
(running regress on estimation sample)

Bootstrap replications (50)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
...............x.x.........................x......    50

Linear regression                               Number of obs     =      4,961
                                                Replications      =         47
                                                Wald chi2(4)      =     458.56
                                                Prob > chi2       =     0.0000
                                                R-squared         =     0.0245
                                                Adj R-squared     =     0.0237
                                                Root MSE          =     0.4848

------------------------------------------------------------------------------
             |   Observed   Bstrap *
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   -.001382   .0006096    -2.27   0.023    -.0025769   -.0001872
    military |  -.5332357   .0354227   -15.05   0.000    -.6026629   -.4638084
        race |  -.0608736   .0067805    -8.98   0.000    -.0741631   -.0475841
    employed |  -.0820687   .0164523    -4.99   0.000    -.1143147   -.0498228
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .8324552    .028575    29.13   0.000     .7764493    .8884611
------------------------------------------------------------------------------
Note: One or more parameters could not be estimated in 3 bootstrap replicates;
      standard-error estimates include only complete replications.
(2,931 missing values generated)
(option xb assumed; fitted values)
(2,931 missing values generated)
===========================================================================
(running logit on estimation sample)

Bootstrap replications (50)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used
note: mz_wage omitted because of collinearity
note: mz_military omitted because of collinearity

Logistic regression                             Number of obs     =      2,747
                                                Replications      =         50
                                                Wald chi2(3)      =     267.97
                                                Prob > chi2       =     0.0000
Log likelihood =  -1669.423                     Pseudo R2         =     0.1213

------------------------------------------------------------------------------
             |   Observed   Bstrap *
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0075805   .0041742     1.82   0.069    -.0006008    .0157618
        wage |  -.0977672   .0069489   -14.07   0.000    -.1113868   -.0841476
    military |          0  (omitted)
        race |  -.2427449   .0396934    -6.12   0.000    -.3205425   -.1649472
     mz_wage |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   1.920186    .179332    10.71   0.000     1.568702    2.271671
------------------------------------------------------------------------------
(5145 missing values generated)
(option pr assumed; Pr(unin))
(5,145 missing values generated)
(running logit on estimation sample)

Bootstrap replications (50)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used
note: employed omitted because of collinearity
note: mz_wage omitted because of collinearity
note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity

Logistic regression                             Number of obs     =      2,698
                                                Replications      =         50
                                                Wald chi2(3)      =     216.01
                                                Prob > chi2       =     0.0000
Log likelihood = -1633.7807                     Pseudo R2         =     0.1247

------------------------------------------------------------------------------
             |   Observed   Bstrap *
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0049546   .0035621     1.39   0.164    -.0020269    .0119361
        wage |  -.0978218   .0067225   -14.55   0.000    -.1109977   -.0846459
    military |          0  (omitted)
        race |  -.2610312   .0500106    -5.22   0.000    -.3590502   -.1630122
    employed |          0  (omitted)
     mz_wage |          0  (omitted)
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   2.053956   .1939987    10.59   0.000     1.673726    2.434187
------------------------------------------------------------------------------
(5194 missing values generated)
(option pr assumed; Pr(unin))
(5,194 missing values generated)
(running logit on estimation sample)

Bootstrap replications (50)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used
note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity

Logistic regression                             Number of obs     =      4,958
                                                Replications      =         50
                                                Wald chi2(3)      =     114.69
                                                Prob > chi2       =     0.0000
Log likelihood = -3284.1901                     Pseudo R2         =     0.0176

------------------------------------------------------------------------------
             |   Observed   Bstrap *
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |  -.0058648   .0025798    -2.27   0.023    -.0109212   -.0008083
    military |          0  (omitted)
        race |  -.2543211   .0292498    -8.69   0.000    -.3116497   -.1969926
    employed |  -.3544965   .0641154    -5.53   0.000    -.4801603   -.2288326
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   1.397169   .1143611    12.22   0.000     1.173025    1.621312
------------------------------------------------------------------------------
(2934 missing values generated)
(option pr assumed; Pr(unin))
(2,934 missing values generated)
===========================================================================
(running probit on estimation sample)

Bootstrap replications (50)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used
note: mz_wage omitted because of collinearity
note: mz_military omitted because of collinearity

Probit regression                               Number of obs     =      2,747
                                                Replications      =         50
                                                Wald chi2(3)      =     216.16
                                                Prob > chi2       =     0.0000
Log likelihood = -1672.3851                     Pseudo R2         =     0.1197

------------------------------------------------------------------------------
             |   Observed   Bstrap *
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0040235   .0025215     1.60   0.111    -.0009185    .0089655
        wage |  -.0565882   .0044422   -12.74   0.000    -.0652947   -.0478816
    military |          0  (omitted)
        race |  -.1493293   .0243954    -6.12   0.000    -.1971434   -.1015151
     mz_wage |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   1.157482   .1045412    11.07   0.000     .9525855    1.362379
------------------------------------------------------------------------------
(5145 missing values generated)
(option pr assumed; Pr(unin))
(5,145 missing values generated)
(running probit on estimation sample)

Bootstrap replications (50)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used
note: employed omitted because of collinearity
note: mz_wage omitted because of collinearity
note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity

Probit regression                               Number of obs     =      2,698
                                                Replications      =         50
                                                Wald chi2(3)      =     270.54
                                                Prob > chi2       =     0.0000
Log likelihood = -1636.6755                     Pseudo R2         =     0.1231

------------------------------------------------------------------------------
             |   Observed   Bstrap *
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0024574   .0024056     1.02   0.307    -.0022575    .0071722
        wage |  -.0565698   .0039887   -14.18   0.000    -.0643875   -.0487521
    military |          0  (omitted)
        race |  -.1608376   .0257663    -6.24   0.000    -.2113385   -.1103366
    employed |          0  (omitted)
     mz_wage |          0  (omitted)
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   1.237932   .1090493    11.35   0.000     1.024199    1.451665
------------------------------------------------------------------------------
(5194 missing values generated)
(option pr assumed; Pr(unin))
(5,194 missing values generated)
(running probit on estimation sample)

Bootstrap replications (50)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used
note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity

Probit regression                               Number of obs     =      4,958
                                                Replications      =         50
                                                Wald chi2(3)      =     123.95
                                                Prob > chi2       =     0.0000
Log likelihood = -3283.6812                     Pseudo R2         =     0.0178

------------------------------------------------------------------------------
             |   Observed   Bstrap *
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |  -.0035483   .0013345    -2.66   0.008    -.0061639   -.0009327
    military |          0  (omitted)
        race |  -.1598313   .0160886    -9.93   0.000    -.1913644   -.1282983
    employed |  -.2179443   .0473314    -4.60   0.000    -.3107123   -.1251764
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .8680282   .0751574    11.55   0.000     .7207225    1.015334
------------------------------------------------------------------------------
(2934 missing values generated)
(option pr assumed; Pr(unin))
(2,934 missing values generated)
===========================================================================

. 
. local list = "regress logit probit"

. 
. forval x = 1/3 {
  2. 
.         stderr regress_uhat`x' logit_uhat`x' probit_uhat`x' 
  3.         matrix define stderr`x' = (regress_uhat`x', logit_uhat`x' ,probit_uhat`x' )
  4. 
. }
stderr of regress_uhat1 = 0
stderr of logit_uhat1 = 0
stderr of probit_uhat1 = 0
stderr of regress_uhat2 = 0
stderr of logit_uhat2 = 0
stderr of probit_uhat2 = 0
stderr of regress_uhat3 = 0
stderr of logit_uhat3 = 0
stderr of probit_uhat3 = 0

. 
. matrix stderr = stderr1\stderr2\stderr3

. matrix rownames stderr = stderr1 stderr2 stderr3

. matrix colnames stderr =  REGRESS LOGIT PROBIT

. 
. putexcel set "output.csv", sheet(bootstrapped) modify

. putexcel A1 = matrix(stderr), names nformat(number_d2)
file output.csv saved

. 
. capture {

Probit model for unin

              -------- True --------
Classified |         D            ~D  |      Total
-----------+--------------------------+-----------
     +     |      2662          1735  |       4397
     -     |       297           264  |        561
-----------+--------------------------+-----------
   Total   |      2959          1999  |       4958

Classified + if predicted Pr(D) >= .5
True D defined as unin != 0
--------------------------------------------------
Sensitivity                     Pr( +| D)   89.96%
Specificity                     Pr( -|~D)   13.21%
Positive predictive value       Pr( D| +)   60.54%
Negative predictive value       Pr(~D| -)   47.06%
--------------------------------------------------
False + rate for true ~D        Pr( +|~D)   86.79%
False - rate for true D         Pr( -| D)   10.04%
False + rate for classified +   Pr(~D| +)   39.46%
False - rate for classified -   Pr( D| -)   52.94%
--------------------------------------------------
Correctly classified                        59.02%
--------------------------------------------------

Probit model for unin, goodness-of-fit test

       number of observations =      4958
 number of covariate patterns =       337
            Pearson chi2(333) =      1640.27
                  Prob > chi2 =         0.0000

Probit model for unin, goodness-of-fit test

  (Table collapsed on quantiles of estimated probabilities)

       number of observations =      4958
             number of groups =        10
      Hosmer-Lemeshow chi2(8) =       244.44
                  Prob > chi2 =         0.0000

Probit model for unin, goodness-of-fit test

  (Table collapsed on quantiles of estimated probabilities)
  +--------------------------------------------------------+
  | Group |   Prob | Obs_1 | Exp_1 | Obs_0 | Exp_0 | Total |
  |-------+--------+-------+-------+-------+-------+-------|
  |     1 | 0.4959 |   259 | 224.7 |   242 | 276.3 |   501 |
  |     2 | 0.5383 |   320 | 258.2 |   179 | 240.8 |   499 |
  |     3 | 0.5636 |   214 | 281.1 |   293 | 225.9 |   507 |
  |     4 | 0.5831 |   196 | 288.2 |   305 | 212.8 |   501 |
  |     5 | 0.6010 |   235 | 280.1 |   238 | 192.9 |   473 |
  |-------+--------+-------+-------+-------+-------+-------|
  |     6 | 0.6286 |   317 | 306.2 |   179 | 189.8 |   496 |
  |     7 | 0.6415 |   364 | 327.4 |   151 | 187.6 |   515 |
  |     8 | 0.6547 |   384 | 321.8 |   112 | 174.2 |   496 |
  |     9 | 0.6872 |   278 | 321.7 |   204 | 160.3 |   482 |
  |    10 | 0.7426 |   392 | 351.5 |    96 | 136.5 |   488 |
  +--------------------------------------------------------+

       number of observations =      4958
             number of groups =        10
      Hosmer-Lemeshow chi2(8) =       244.44
                  Prob > chi2 =         0.0000

. 
. foreach x in `list' {
  2. estimates table `x'_1 `x'_2 `x'_3, ///
>   stats(N ll r2_p mrse) b(%7.3f) stfmt(%8.2f)
  3.   
. sum `x'_yhat1 `x'_yhat2 `x'_yhat3 ${depvar}
  4. sum `x'_uhat1 `x'_uhat2 `x'_uhat3
  5. }

--------------------------------------------------
    Variable | regress_1   regress_2   regress_3  
-------------+------------------------------------
         age |     0.001       0.001      -0.001  
        wage |    -0.015      -0.015              
    military |    -0.379      -0.375      -0.533  
        race |    -0.051      -0.055      -0.061  
     mz_wage | (omitted)   (omitted)              
 mz_military | (omitted)   (omitted)   (omitted)  
    employed |             (omitted)      -0.082  
 mz_employed |             (omitted)   (omitted)  
       _cons |     0.849       0.875       0.832  
-------------+------------------------------------
           N |      2750        2701        4961  
          ll |  -1792.01    -1755.06    -3445.03  
        r2_p |                                    
        mrse |                                    
--------------------------------------------------

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
regress_yh~1 |      2,750    .5272727    .1836469  -.5791362   .8133374
regress_yh~2 |      2,701     .525361    .1860809  -.5876901   .8123071
regress_yh~3 |      4,961    .5964523    .0768151  -.0830075   .7494689
        unin |      7,892          .5    .5000317          0          1

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
regress_uh~1 |      7,892    .0057617    .0086033          0   .0797637
regress_uh~2 |      7,892    .0054678    .0084481          0   .0996774
regress_uh~3 |      7,892    .0088494    .0073353          0   .0353949

--------------------------------------------------
    Variable |  logit_1     logit_2     logit_3   
-------------+------------------------------------
         age |     0.008       0.005      -0.006  
        wage |    -0.098      -0.098              
    military | (omitted)   (omitted)   (omitted)  
        race |    -0.243      -0.261      -0.254  
     mz_wage | (omitted)   (omitted)              
 mz_military | (omitted)   (omitted)   (omitted)  
    employed |             (omitted)      -0.354  
 mz_employed |             (omitted)   (omitted)  
       _cons |     1.920       2.054       1.397  
-------------+------------------------------------
           N |      2747        2698        4958  
          ll |  -1669.42    -1633.78    -3284.19  
        r2_p |      0.12        0.12        0.02  
        mrse |                                    
--------------------------------------------------

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
 logit_yhat1 |      2,747    .5278486    .1940327   .0009035     .85663
 logit_yhat2 |      2,698    .5259451    .1967009   .0008292   .8572529
 logit_yhat3 |      4,958    .5968132    .0754796   .3614471   .7405851
        unin |      7,892          .5    .5000317          0          1

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
 logit_uhat1 |      7,892    .0331879    .0547608          0   .4789936
 logit_uhat2 |      7,892     .033093    .0561694          0   .5053355
 logit_uhat3 |      7,892    .0362189    .0310405          0   .1256559

--------------------------------------------------
    Variable | probit_1    probit_2    probit_3   
-------------+------------------------------------
         age |     0.004       0.002      -0.004  
        wage |    -0.057      -0.057              
    military | (omitted)   (omitted)   (omitted)  
        race |    -0.149      -0.161      -0.160  
     mz_wage | (omitted)   (omitted)              
 mz_military | (omitted)   (omitted)   (omitted)  
    employed |             (omitted)      -0.218  
 mz_employed |             (omitted)   (omitted)  
       _cons |     1.157       1.238       0.868  
-------------+------------------------------------
           N |      2747        2698        4958  
          ll |  -1672.39    -1636.68    -3283.68  
        r2_p |      0.12        0.12        0.02  
        mrse |                                    
--------------------------------------------------

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
probit_yhat1 |      2,747    .5292228    .1898114    .000024   .8546549
probit_yhat2 |      2,698    .5274524    .1925561   .0000194   .8553845
probit_yhat3 |      4,958    .5972345     .075901   .3613415   .7426135
        unin |      7,892          .5    .5000317          0          1

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
probit_uhat1 |      7,892    .0203859    .0340277          0   .3046021
probit_uhat2 |      7,892    .0194305    .0324854          0   .2752783
probit_uhat3 |      7,892    .0217664    .0190883          0   .0709786

. 
. 
. 
. local list = "regress logit probit"

. 
. forval y = 1/3 {
  2. foreach x in `list' {
  3.         
.                 estimates restore `x'_`y'
  4.                 
.                 noisily di "============================================================"
  5.                 noisily di "Model `x'_`y' " e(cmdline)
  6.                 noisily di "============================================================"
  7. 
.                 count if `x'_yhat`y' > .5 & ${depvar}==1 & e(sample)
  8.                 scalar x = r(N)
  9.                 count if ${depvar}==1 & e(sample)
 10.                 scalar y = r(N)
 11.                 scalar z1 = x/y
 12.                 noisily di "Correct Success Prediction Rate: " z1
 13.                 noisily di "predicted =" x ", Actual = " y
 14. 
.                 noisily di "  "
 15. 
.                 count if `x'_yhat`y'<.5 & ${depvar}==0 & e(sample)
 16.                 scalar x = r(N)
 17.                 count if ${depvar}==0 & e(sample) 
 18.                 scalar y = r(N)
 19.                 scalar z2 = x/y
 20.                 noisily di "Correct Failure Prediction Rate: " z2
 21.                 noisily di "predicted =" x ", Actual = " y
 22. 
.                 noisily di " "
 23.                 
.                 count if `x'_yhat`y'> .5 & ${depvar}==0 & e(sample)
 24.                 scalar x = r(N)
 25.                 count if ${depvar}==1 & e(sample)
 26.                 scalar y = r(N)
 27.                 scalar z3 = x/y
 28.                 noisily di "Incorrect Success Prediction Rate: " z3
 29.                 noisily di "predicted =" x ", Actual = " y
 30. 
.                 noisily di " "
 31.                 
.                 count if `x'_yhat`y'<.5 & ${depvar}==1 & e(sample)
 32.                 scalar x = r(N)
 33.                 count if ${depvar}==0 & e(sample)
 34.                 scalar y = r(N)
 35.                 scalar z4 = x/y
 36.                 noisily di "Incorrect Failure Prediction Rate: " z4
 37.                 noisily di "predicted =" x ", Actual = " y
 38.                 matrix define prediction`x'`y' = (z1, z2, z3, z4)
 39. 
. di "==========================================================================="
 40. }
 41. }
(results regress_1 are active now)
============================================================
Model regress_1 bootstrap , rep(50) mse: regress unin age wage military race mz_wage mz_military
============================================================
  1,223
  1,450
Correct Success Prediction Rate: .84344828
predicted =1223, Actual = 1450
  
  586
  1,300
Correct Failure Prediction Rate: .45076923
predicted =586, Actual = 1300
 
  714
  1,450
Incorrect Success Prediction Rate: .49241379
predicted =714, Actual = 1450
 
  227
  1,300
Incorrect Failure Prediction Rate: .17461538
predicted =227, Actual = 1300
===========================================================================
(results logit_1 are active now)
============================================================
Model logit_1 bootstrap , rep(50) mse: logit unin age wage military race mz_wage mz_military
============================================================
  1,143
  1,450
Correct Success Prediction Rate: .78827586
predicted =1143, Actual = 1450
  
  685
  1,297
Correct Failure Prediction Rate: .52814187
predicted =685, Actual = 1297
 
  612
  1,450
Incorrect Success Prediction Rate: .42206897
predicted =612, Actual = 1450
 
  307
  1,297
Incorrect Failure Prediction Rate: .23670008
predicted =307, Actual = 1297
===========================================================================
(results probit_1 are active now)
============================================================
Model probit_1 bootstrap , rep(50) mse: probit unin age wage military race mz_wage mz_military
============================================================
  1,148
  1,450
Correct Success Prediction Rate: .79172414
predicted =1148, Actual = 1450
  
  666
  1,297
Correct Failure Prediction Rate: .51349268
predicted =666, Actual = 1297
 
  631
  1,450
Incorrect Success Prediction Rate: .43517241
predicted =631, Actual = 1450
 
  302
  1,297
Incorrect Failure Prediction Rate: .23284503
predicted =302, Actual = 1297
===========================================================================
(results regress_2 are active now)
============================================================
Model regress_2 bootstrap , rep(50) mse: regress unin age wage military race employed mz_wage mz_employed mz_military
============================================================
  1,158
  1,419
Correct Success Prediction Rate: .81606765
predicted =1158, Actual = 1419
  
  570
  1,282
Correct Failure Prediction Rate: .44461778
predicted =570, Actual = 1282
 
  712
  1,419
Incorrect Success Prediction Rate: .5017618
predicted =712, Actual = 1419
 
  261
  1,282
Incorrect Failure Prediction Rate: .20358814
predicted =261, Actual = 1282
===========================================================================
(results logit_2 are active now)
============================================================
Model logit_2 bootstrap , rep(50) mse: logit unin age wage military race employed mz_wage mz_employed mz_military
============================================================
  1,107
  1,419
Correct Success Prediction Rate: .78012685
predicted =1107, Actual = 1419
  
  696
  1,279
Correct Failure Prediction Rate: .54417514
predicted =696, Actual = 1279
 
  583
  1,419
Incorrect Success Prediction Rate: .41085271
predicted =583, Actual = 1419
 
  312
  1,279
Incorrect Failure Prediction Rate: .24394058
predicted =312, Actual = 1279
===========================================================================
(results probit_2 are active now)
============================================================
Model probit_2 bootstrap , rep(50) mse: probit unin age wage military race employed mz_wage mz_employed mz_military
============================================================
  1,111
  1,419
Correct Success Prediction Rate: .78294574
predicted =1111, Actual = 1419
  
  689
  1,279
Correct Failure Prediction Rate: .53870211
predicted =689, Actual = 1279
 
  590
  1,419
Incorrect Success Prediction Rate: .41578576
predicted =590, Actual = 1419
 
  308
  1,279
Incorrect Failure Prediction Rate: .24081314
predicted =308, Actual = 1279
===========================================================================
(results regress_3 are active now)
============================================================
Model regress_3 bootstrap , rep(50) mse: regress unin age military race employed mz_employed mz_military
============================================================
  2,693
  2,959
Correct Success Prediction Rate: .91010477
predicted =2693, Actual = 2959
  
  251
  2,002
Correct Failure Prediction Rate: .12537463
predicted =251, Actual = 2002
 
  1,751
  2,959
Incorrect Success Prediction Rate: .59175397
predicted =1751, Actual = 2959
 
  266
  2,002
Incorrect Failure Prediction Rate: .13286713
predicted =266, Actual = 2002
===========================================================================
(results logit_3 are active now)
============================================================
Model logit_3 bootstrap , rep(50) mse: logit unin age military race employed mz_employed mz_military
============================================================
  2,658
  2,959
Correct Success Prediction Rate: .89827644
predicted =2658, Actual = 2959
  
  258
  1,999
Correct Failure Prediction Rate: .12906453
predicted =258, Actual = 1999
 
  1,741
  2,959
Incorrect Success Prediction Rate: .58837445
predicted =1741, Actual = 2959
 
  301
  1,999
Incorrect Failure Prediction Rate: .15057529
predicted =301, Actual = 1999
===========================================================================
(results probit_3 are active now)
============================================================
Model probit_3 bootstrap , rep(50) mse: probit unin age military race employed mz_employed mz_military
============================================================
  2,662
  2,959
Correct Success Prediction Rate: .89962825
predicted =2662, Actual = 2959
  
  264
  1,999
Correct Failure Prediction Rate: .13206603
predicted =264, Actual = 1999
 
  1,735
  2,959
Incorrect Success Prediction Rate: .58634674
predicted =1735, Actual = 2959
 
  297
  1,999
Incorrect Failure Prediction Rate: .14857429
predicted =297, Actual = 1999
===========================================================================

. 
. 
. 
. 
. forval y = 1/3 {
  2.         matrix accuracy`y' = (predictionregress`y' \ predictionlogit`y' \ predictionprobit`y')
  3.         
.         matrix colnames accuracy`y' = correct_success correct_failure   inaccurate_success inaccurate_failure
  4.         
.         matrix rownames accuracy`x'`y' = REGRESS LOGIT PROBIT
  5.         
. 
.         putexcel set "prediction.csv", sheet(bootstrapped`y') modify
  6.         putexcel A1 = matrix(accuracy`x'`y'), names nformat(number_d2)
  7. 
. }
file prediction.csv saved
file prediction.csv saved
file prediction.csv saved

. 
. 
. ********************************************************************************
. ********************************************************************************
. *
. * COOKSD REGRESSION 
. *
. ********************************************************************************
. ********************************************************************************
. 
. local list = "regress logit probit"

. 
. cap drop *_uhat* *_yhat*

. 
. foreach x in `list' {
  2. 
. `x' ${depvar} ${model1} ${cooksd}
  3. estimates store `x'_1
  4. predict `x'_uhat1, stdp
  5. predict `x'_yhat1 
  6. 
. `x' ${depvar} ${model2} ${cooksd}
  7. estimates store `x'_2
  8. predict `x'_uhat2, stdp
  9. predict `x'_yhat2 
 10. 
. `x' ${depvar} ${model3} ${cooksd}
 11. estimates store `x'_3
 12. predict `x'_uhat3, stdp
 13. predict `x'_yhat3 
 14. di "==========================================================================="
 15. }
note: mz_wage omitted because of collinearity
note: mz_military omitted because of collinearity

      Source |       SS           df       MS      Number of obs   =     2,583
-------------+----------------------------------   F(4, 2578)      =    149.61
       Model |    121.6509         4  30.4127251   Prob > F        =    0.0000
    Residual |   524.06416     2,578  .203283227   R-squared       =    0.1884
-------------+----------------------------------   Adj R-squared   =    0.1871
       Total |   645.71506     2,582  .250083292   Root MSE        =    .45087

------------------------------------------------------------------------------
        unin |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0015323   .0007938     1.93   0.054    -.0000242    .0030888
        wage |  -.0138088   .0007868   -17.55   0.000    -.0153517   -.0122659
    military |  -.2901849   .2606214    -1.11   0.266    -.8012334    .2208635
        race |  -.1438911   .0102898   -13.98   0.000    -.1640683    -.123714
     mz_wage |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .9618313   .0340106    28.28   0.000     .8951404    1.028522
------------------------------------------------------------------------------
(5,142 missing values generated)
(option xb assumed; fitted values)
(5,142 missing values generated)
note: employed omitted because of collinearity
note: mz_wage omitted because of collinearity
note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity

      Source |       SS           df       MS      Number of obs   =     2,583
-------------+----------------------------------   F(4, 2578)      =    149.61
       Model |    121.6509         4  30.4127251   Prob > F        =    0.0000
    Residual |   524.06416     2,578  .203283227   R-squared       =    0.1884
-------------+----------------------------------   Adj R-squared   =    0.1871
       Total |   645.71506     2,582  .250083292   Root MSE        =    .45087

------------------------------------------------------------------------------
        unin |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0015323   .0007938     1.93   0.054    -.0000242    .0030888
        wage |  -.0138088   .0007868   -17.55   0.000    -.0153517   -.0122659
    military |  -.2901849   .2606214    -1.11   0.266    -.8012334    .2208635
        race |  -.1438911   .0102898   -13.98   0.000    -.1640683    -.123714
    employed |          0  (omitted)
     mz_wage |          0  (omitted)
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .9618313   .0340106    28.28   0.000     .8951404    1.028522
------------------------------------------------------------------------------
(5,191 missing values generated)
(option xb assumed; fitted values)
(5,191 missing values generated)
note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity

      Source |       SS           df       MS      Number of obs   =     3,825
-------------+----------------------------------   F(4, 3820)      =    105.72
       Model |  94.7583837         4  23.6895959   Prob > F        =    0.0000
    Residual |   855.95691     3,820   .22407249   R-squared       =    0.0997
-------------+----------------------------------   Adj R-squared   =    0.0987
       Total |  950.715294     3,824  .248618016   Root MSE        =    .47336

------------------------------------------------------------------------------
        unin |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0002642   .0006214     0.43   0.671     -.000954    .0014825
    military |  -.3753567   .2735355    -1.37   0.170    -.9116463    .1609329
        race |    -.16401   .0084998   -19.30   0.000    -.1806746   -.1473455
    employed |  -.1266442   .0164653    -7.69   0.000    -.1589259   -.0943625
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .9288793   .0301474    30.81   0.000     .8697727    .9879859
------------------------------------------------------------------------------
(2,931 missing values generated)
(option xb assumed; fitted values)
(2,931 missing values generated)
===========================================================================

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: mz_wage omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log likelihood = -1788.2259  
Iteration 1:   log likelihood = -1493.5884  
Iteration 2:   log likelihood = -1482.6381  
Iteration 3:   log likelihood = -1482.5899  
Iteration 4:   log likelihood = -1482.5899  

Logistic regression                             Number of obs     =      2,580
                                                LR chi2(3)        =     611.27
                                                Prob > chi2       =     0.0000
Log likelihood = -1482.5899                     Pseudo R2         =     0.1709

------------------------------------------------------------------------------
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0105831   .0039162     2.70   0.007     .0029074    .0182588
        wage |  -.1012741   .0066038   -15.34   0.000    -.1142173   -.0883308
    military |          0  (omitted)
        race |  -.7128707   .0542198   -13.15   0.000    -.8191395   -.6066019
     mz_wage |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   2.625368   .1848011    14.21   0.000     2.263165    2.987572
------------------------------------------------------------------------------
(5145 missing values generated)
(option pr assumed; Pr(unin))
(5,145 missing values generated)

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: employed omitted because of collinearity
note: mz_wage omitted because of collinearity
note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log likelihood = -1788.2259  
Iteration 1:   log likelihood = -1493.5884  
Iteration 2:   log likelihood = -1482.6381  
Iteration 3:   log likelihood = -1482.5899  
Iteration 4:   log likelihood = -1482.5899  

Logistic regression                             Number of obs     =      2,580
                                                LR chi2(3)        =     611.27
                                                Prob > chi2       =     0.0000
Log likelihood = -1482.5899                     Pseudo R2         =     0.1709

------------------------------------------------------------------------------
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0105831   .0039162     2.70   0.007     .0029074    .0182588
        wage |  -.1012741   .0066038   -15.34   0.000    -.1142173   -.0883308
    military |          0  (omitted)
        race |  -.7128707   .0542198   -13.15   0.000    -.8191395   -.6066019
    employed |          0  (omitted)
     mz_wage |          0  (omitted)
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   2.625368   .1848011    14.21   0.000     2.263165    2.987572
------------------------------------------------------------------------------
(5194 missing values generated)
(option pr assumed; Pr(unin))
(5,194 missing values generated)

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log likelihood = -2637.8897  
Iteration 1:   log likelihood = -2439.5998  
Iteration 2:   log likelihood = -2439.5538  
Iteration 3:   log likelihood = -2439.5538  

Logistic regression                             Number of obs     =      3,822
                                                LR chi2(3)        =     396.67
                                                Prob > chi2       =     0.0000
Log likelihood = -2439.5538                     Pseudo R2         =     0.0752

------------------------------------------------------------------------------
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0011566   .0027731     0.42   0.677    -.0042785    .0065918
    military |          0  (omitted)
        race |  -.7310339   .0416682   -17.54   0.000     -.812702   -.6493659
    employed |  -.5676109   .0749222    -7.58   0.000    -.7144557   -.4207662
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   1.900201   .1407536    13.50   0.000     1.624329    2.176073
------------------------------------------------------------------------------
(2934 missing values generated)
(option pr assumed; Pr(unin))
(2,934 missing values generated)
===========================================================================

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: mz_wage omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log likelihood = -1788.2259  
Iteration 1:   log likelihood = -1492.2281  
Iteration 2:   log likelihood = -1484.0007  
Iteration 3:   log likelihood = -1483.9573  
Iteration 4:   log likelihood = -1483.9573  

Probit regression                               Number of obs     =      2,580
                                                LR chi2(3)        =     608.54
                                                Prob > chi2       =     0.0000
Log likelihood = -1483.9573                     Pseudo R2         =     0.1702

------------------------------------------------------------------------------
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0058341   .0023378     2.50   0.013      .001252    .0104162
        wage |   -.058765   .0036419   -16.14   0.000     -.065903   -.0516269
    military |          0  (omitted)
        race |  -.4363449   .0325953   -13.39   0.000    -.5002305   -.3724593
     mz_wage |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |    1.58767   .1093548    14.52   0.000     1.373338    1.802001
------------------------------------------------------------------------------
(5145 missing values generated)
(option pr assumed; Pr(unin))
(5,145 missing values generated)

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: employed omitted because of collinearity
note: mz_wage omitted because of collinearity
note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log likelihood = -1788.2259  
Iteration 1:   log likelihood = -1492.2281  
Iteration 2:   log likelihood = -1484.0007  
Iteration 3:   log likelihood = -1483.9573  
Iteration 4:   log likelihood = -1483.9573  

Probit regression                               Number of obs     =      2,580
                                                LR chi2(3)        =     608.54
                                                Prob > chi2       =     0.0000
Log likelihood = -1483.9573                     Pseudo R2         =     0.1702

------------------------------------------------------------------------------
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0058341   .0023378     2.50   0.013      .001252    .0104162
        wage |   -.058765   .0036419   -16.14   0.000     -.065903   -.0516269
    military |          0  (omitted)
        race |  -.4363449   .0325953   -13.39   0.000    -.5002305   -.3724593
    employed |          0  (omitted)
     mz_wage |          0  (omitted)
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |    1.58767   .1093548    14.52   0.000     1.373338    1.802001
------------------------------------------------------------------------------
(5194 missing values generated)
(option pr assumed; Pr(unin))
(5,194 missing values generated)

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log likelihood = -2637.8897  
Iteration 1:   log likelihood = -2437.8695  
Iteration 2:   log likelihood = -2437.7862  
Iteration 3:   log likelihood = -2437.7862  

Probit regression                               Number of obs     =      3,822
                                                LR chi2(3)        =     400.21
                                                Prob > chi2       =     0.0000
Log likelihood = -2437.7862                     Pseudo R2         =     0.0759

------------------------------------------------------------------------------
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0007107    .001696     0.42   0.675    -.0026133    .0040348
    military |          0  (omitted)
        race |  -.4560135   .0251872   -18.11   0.000    -.5053794   -.4066475
    employed |  -.3449937   .0455314    -7.58   0.000    -.4342336   -.2557538
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   1.180893   .0852157    13.86   0.000     1.013873    1.347913
------------------------------------------------------------------------------
(2934 missing values generated)
(option pr assumed; Pr(unin))
(2,934 missing values generated)
===========================================================================

. 
. 
. local list = "regress logit probit"

. 
. forval x = 1/3 {
  2. 
.         stderr regress_uhat`x' logit_uhat`x' probit_uhat`x' 
  3.         matrix define stderr`x' = (regress_uhat`x', logit_uhat`x' ,probit_uhat`x' )
  4. 
. }
stderr of regress_uhat1 = 0
stderr of logit_uhat1 = 0
stderr of probit_uhat1 = 0
stderr of regress_uhat2 = 0
stderr of logit_uhat2 = 0
stderr of probit_uhat2 = 0
stderr of regress_uhat3 = 0
stderr of logit_uhat3 = 0
stderr of probit_uhat3 = 0

. 
. matrix stderr = stderr1\stderr2\stderr3

. matrix rownames stderr = stderr1 stderr2 stderr

. matrix colnames stderr =  REGRESS LOGIT PROBIT

. 
. putexcel set "output.csv", sheet(COOKSD) modify

. putexcel A1 = matrix(stderr), names nformat(number_d2)
file output.csv saved

. 
. capture {

Probit model for unin

              -------- True --------
Classified |         D            ~D  |      Total
-----------+--------------------------+-----------
     +     |      1304           581  |       1885
     -     |       754          1183  |       1937
-----------+--------------------------+-----------
   Total   |      2058          1764  |       3822

Classified + if predicted Pr(D) >= .5
True D defined as unin != 0
--------------------------------------------------
Sensitivity                     Pr( +| D)   63.36%
Specificity                     Pr( -|~D)   67.06%
Positive predictive value       Pr( D| +)   69.18%
Negative predictive value       Pr(~D| -)   61.07%
--------------------------------------------------
False + rate for true ~D        Pr( +|~D)   32.94%
False - rate for true D         Pr( -| D)   36.64%
False + rate for classified +   Pr(~D| +)   30.82%
False - rate for classified -   Pr( D| -)   38.93%
--------------------------------------------------
Correctly classified                        65.07%
--------------------------------------------------

Probit model for unin, goodness-of-fit test

       number of observations =      3822
 number of covariate patterns =       296
            Pearson chi2(292) =      1424.71
                  Prob > chi2 =         0.0000

Probit model for unin, goodness-of-fit test

  (Table collapsed on quantiles of estimated probabilities)

       number of observations =      3822
             number of groups =        10
      Hosmer-Lemeshow chi2(8) =       197.33
                  Prob > chi2 =         0.0000

Probit model for unin, goodness-of-fit test

  (Table collapsed on quantiles of estimated probabilities)
  +--------------------------------------------------------+
  | Group |   Prob | Obs_1 | Exp_1 | Obs_0 | Exp_0 | Total |
  |-------+--------+-------+-------+-------+-------+-------|
  |     1 | 0.3062 |   119 |  92.0 |   265 | 292.0 |   384 |
  |     2 | 0.4355 |   206 | 136.9 |   175 | 244.1 |   381 |
  |     3 | 0.4779 |   184 | 186.1 |   216 | 213.9 |   400 |
  |     4 | 0.4821 |   114 | 185.8 |   273 | 201.2 |   387 |
  |     5 | 0.4864 |   131 | 186.7 |   254 | 198.3 |   385 |
  |-------+--------+-------+-------+-------+-------+-------|
  |     6 | 0.6207 |   182 | 227.6 |   188 | 142.4 |   370 |
  |     7 | 0.6553 |   262 | 247.4 |   120 | 134.6 |   382 |
  |     8 | 0.6585 |   280 | 246.4 |    95 | 128.6 |   375 |
  |     9 | 0.7699 |   264 | 256.8 |   113 | 120.2 |   377 |
  |    10 | 0.7784 |   316 | 294.9 |    65 |  86.1 |   381 |
  +--------------------------------------------------------+

       number of observations =      3822
             number of groups =        10
      Hosmer-Lemeshow chi2(8) =       197.33
                  Prob > chi2 =         0.0000

. 
. foreach x in `list' {
  2. estimates table `x'_1 `x'_2 `x'_3, ///
>   stats(N ll r2_p mrse) b(%7.3f) stfmt(%8.2f)
  3.   
. sum `x'_yhat1 `x'_yhat2 `x'_yhat3
  4. sum `x'_uhat1 `x'_uhat2 `x'_uhat3
  5. 
. }

--------------------------------------------------
    Variable | regress_1   regress_2   regress_3  
-------------+------------------------------------
         age |     0.002       0.002       0.000  
        wage |    -0.014      -0.014              
    military |    -0.290      -0.290      -0.375  
        race |    -0.144      -0.144      -0.164  
     mz_wage | (omitted)   (omitted)              
 mz_military | (omitted)   (omitted)   (omitted)  
    employed |             (omitted)      -0.127  
 mz_employed |             (omitted)   (omitted)  
       _cons |     0.962       0.962       0.929  
-------------+------------------------------------
           N |      2583        2583        3825  
          ll |  -1605.06    -1605.06    -2564.25  
        r2_p |                                    
        mrse |                                    
--------------------------------------------------

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
regress_yh~1 |      2,750     .490643    .2226095  -.7127454   .8528842
regress_yh~2 |      2,701    .4891646    .2234204  -.7127454   .8528842
regress_yh~3 |      4,961    .5099641    .1781451  -.2183277   .7804597

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
regress_uh~1 |      7,892    .0061722    .0103904          0   .2607173
regress_uh~2 |      7,892    .0060631    .0103555          0   .2607173
regress_uh~3 |      7,892    .0096846    .0096179          0   .2735305

--------------------------------------------------
    Variable |  logit_1     logit_2     logit_3   
-------------+------------------------------------
         age |     0.011       0.011       0.001  
        wage |    -0.101      -0.101              
    military | (omitted)   (omitted)   (omitted)  
        race |    -0.713      -0.713      -0.731  
     mz_wage | (omitted)   (omitted)              
 mz_military | (omitted)   (omitted)   (omitted)  
    employed |             (omitted)      -0.568  
 mz_employed |             (omitted)   (omitted)  
       _cons |     2.625       2.625       1.900  
-------------+------------------------------------
           N |      2580        2580        3822  
          ll |  -1482.59    -1482.59    -2439.55  
        r2_p |      0.17        0.17        0.08  
        mrse |                                    
--------------------------------------------------

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
 logit_yhat1 |      2,747    .4915794    .2346869   .0002431   .8948506
 logit_yhat2 |      2,698    .4898161     .235248   .0002431   .8948506
 logit_yhat3 |      4,958    .5121987    .1732417   .0912647   .7751125

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
 logit_uhat1 |      7,892    .0348441    .0568381          0   .4733997
 logit_uhat2 |      7,892    .0342791    .0566938          0   .4733997
 logit_uhat3 |      7,892      .04401    .0379336          0   .1505781

--------------------------------------------------
    Variable | probit_1    probit_2    probit_3   
-------------+------------------------------------
         age |     0.006       0.006       0.001  
        wage |    -0.059      -0.059              
    military | (omitted)   (omitted)   (omitted)  
        race |    -0.436      -0.436      -0.456  
     mz_wage | (omitted)   (omitted)              
 mz_military | (omitted)   (omitted)   (omitted)  
    employed |             (omitted)      -0.345  
 mz_employed |             (omitted)   (omitted)  
       _cons |     1.588       1.588       1.181  
-------------+------------------------------------
           N |      2580        2580        3822  
          ll |  -1483.96    -1483.96    -2437.79  
        r2_p |      0.17        0.17        0.08  
        mrse |                                    
--------------------------------------------------

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
probit_yhat1 |      2,747    .4925424    .2331398   5.53e-07    .898169
probit_yhat2 |      2,698    .4908096    .2336985   5.53e-07    .898169
probit_yhat3 |      4,958    .5123784    .1757477   .0764672   .7784031

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
probit_uhat1 |      7,892    .0203942     .032654          0   .2587466
probit_uhat2 |      7,892    .0200564    .0325593          0   .2587466
probit_uhat3 |      7,892     .026836    .0230392          0   .0918119

. 
. local list = "regress logit probit"

. 
. forval y = 1/3 {
  2. foreach x in `list' {
  3.         
.                 estimates restore `x'_`y'
  4.                 
.                 noisily di "============================================================"
  5.                 noisily di "Model `x'_`y' " e(cmdline)
  6.                 noisily di "============================================================"
  7. 
.                 count if `x'_yhat`y' > .5 & ${depvar}==1 & e(sample)
  8.                 scalar x = r(N)
  9.                 count if ${depvar}==1 & e(sample)
 10.                 scalar y = r(N)
 11.                 scalar z1 = x/y
 12.                 noisily di "Correct Success Prediction Rate: " z1
 13.                 noisily di "predicted =" x ", Actual = " y
 14. 
.                 noisily di "  "
 15. 
.                 count if `x'_yhat`y'<.5 & ${depvar}==0 & e(sample)
 16.                 scalar x = r(N)
 17.                 count if ${depvar}==0 & e(sample) 
 18.                 scalar y = r(N)
 19.                 scalar z2 = x/y
 20.                 noisily di "Correct Failure Prediction Rate: " z2
 21.                 noisily di "predicted =" x ", Actual = " y
 22. 
.                 noisily di " "
 23.                 
.                 count if `x'_yhat`y'> .5 & ${depvar}==0 & e(sample)
 24.                 scalar x = r(N)
 25.                 count if ${depvar}==1 & e(sample)
 26.                 scalar y = r(N)
 27.                 scalar z3 = x/y
 28.                 noisily di "Incorrect Success Prediction Rate: " z3
 29.                 noisily di "predicted =" x ", Actual = " y
 30. 
.                 noisily di " "
 31.                 
.                 count if `x'_yhat`y'<.5 & ${depvar}==1 & e(sample)
 32.                 scalar x = r(N)
 33.                 count if ${depvar}==0 & e(sample)
 34.                 scalar y = r(N)
 35.                 scalar z4 = x/y
 36.                 noisily di "Incorrect Failure Prediction Rate: " z4
 37.                 noisily di "predicted =" x ", Actual = " y
 38.                 matrix define prediction`x'`y' = (z1, z2, z3, z4)
 39. 
. di "==========================================================================="
 40. }
 41. }
(results regress_1 are active now)
============================================================
Model regress_1 regress unin age wage military race mz_wage mz_military if cooksd < 4/_N
============================================================
  940
  1,301
Correct Success Prediction Rate: .72252114
predicted =940, Actual = 1301
  
  817
  1,282
Correct Failure Prediction Rate: .63728549
predicted =817, Actual = 1282
 
  465
  1,301
Incorrect Success Prediction Rate: .35741737
predicted =465, Actual = 1301
 
  361
  1,282
Incorrect Failure Prediction Rate: .28159126
predicted =361, Actual = 1282
===========================================================================
(results logit_1 are active now)
============================================================
Model logit_1 logit unin age wage military race mz_wage mz_military if cooksd < 4/_N
============================================================
  935
  1,301
Correct Success Prediction Rate: .71867794
predicted =935, Actual = 1301
  
  824
  1,279
Correct Failure Prediction Rate: .64425332
predicted =824, Actual = 1279
 
  455
  1,301
Incorrect Success Prediction Rate: .34973098
predicted =455, Actual = 1301
 
  366
  1,279
Incorrect Failure Prediction Rate: .28616106
predicted =366, Actual = 1279
===========================================================================
(results probit_1 are active now)
============================================================
Model probit_1 probit unin age wage military race mz_wage mz_military if cooksd < 4/_N
============================================================
  941
  1,301
Correct Success Prediction Rate: .72328978
predicted =941, Actual = 1301
  
  828
  1,279
Correct Failure Prediction Rate: .64738077
predicted =828, Actual = 1279
 
  451
  1,301
Incorrect Success Prediction Rate: .34665642
predicted =451, Actual = 1301
 
  360
  1,279
Incorrect Failure Prediction Rate: .2814699
predicted =360, Actual = 1279
===========================================================================
(results regress_2 are active now)
============================================================
Model regress_2 regress unin age wage military race employed mz_wage mz_employed mz_military if cooksd < 4/_N
============================================================
  940
  1,301
Correct Success Prediction Rate: .72252114
predicted =940, Actual = 1301
  
  817
  1,282
Correct Failure Prediction Rate: .63728549
predicted =817, Actual = 1282
 
  465
  1,301
Incorrect Success Prediction Rate: .35741737
predicted =465, Actual = 1301
 
  361
  1,282
Incorrect Failure Prediction Rate: .28159126
predicted =361, Actual = 1282
===========================================================================
(results logit_2 are active now)
============================================================
Model logit_2 logit unin age wage military race employed mz_wage mz_employed mz_military if cooksd < 4/_N
============================================================
  935
  1,301
Correct Success Prediction Rate: .71867794
predicted =935, Actual = 1301
  
  824
  1,279
Correct Failure Prediction Rate: .64425332
predicted =824, Actual = 1279
 
  455
  1,301
Incorrect Success Prediction Rate: .34973098
predicted =455, Actual = 1301
 
  366
  1,279
Incorrect Failure Prediction Rate: .28616106
predicted =366, Actual = 1279
===========================================================================
(results probit_2 are active now)
============================================================
Model probit_2 probit unin age wage military race employed mz_wage mz_employed mz_military if cooksd < 4/_N
============================================================
  941
  1,301
Correct Success Prediction Rate: .72328978
predicted =941, Actual = 1301
  
  828
  1,279
Correct Failure Prediction Rate: .64738077
predicted =828, Actual = 1279
 
  451
  1,301
Incorrect Success Prediction Rate: .34665642
predicted =451, Actual = 1301
 
  360
  1,279
Incorrect Failure Prediction Rate: .2814699
predicted =360, Actual = 1279
===========================================================================
(results regress_3 are active now)
============================================================
Model regress_3 regress unin age military race employed mz_employed mz_military if cooksd < 4/_N
============================================================
  1,304
  2,058
Correct Success Prediction Rate: .63362488
predicted =1304, Actual = 2058
  
  1,186
  1,767
Correct Failure Prediction Rate: .67119411
predicted =1186, Actual = 1767
 
  581
  2,058
Incorrect Success Prediction Rate: .28231293
predicted =581, Actual = 2058
 
  754
  1,767
Incorrect Failure Prediction Rate: .42671194
predicted =754, Actual = 1767
===========================================================================
(results logit_3 are active now)
============================================================
Model logit_3 logit unin age military race employed mz_employed mz_military if cooksd < 4/_N
============================================================
  1,304
  2,058
Correct Success Prediction Rate: .63362488
predicted =1304, Actual = 2058
  
  1,183
  1,764
Correct Failure Prediction Rate: .67063492
predicted =1183, Actual = 1764
 
  581
  2,058
Incorrect Success Prediction Rate: .28231293
predicted =581, Actual = 2058
 
  754
  1,764
Incorrect Failure Prediction Rate: .42743764
predicted =754, Actual = 1764
===========================================================================
(results probit_3 are active now)
============================================================
Model probit_3 probit unin age military race employed mz_employed mz_military if cooksd < 4/_N
============================================================
  1,304
  2,058
Correct Success Prediction Rate: .63362488
predicted =1304, Actual = 2058
  
  1,183
  1,764
Correct Failure Prediction Rate: .67063492
predicted =1183, Actual = 1764
 
  581
  2,058
Incorrect Success Prediction Rate: .28231293
predicted =581, Actual = 2058
 
  754
  1,764
Incorrect Failure Prediction Rate: .42743764
predicted =754, Actual = 1764
===========================================================================

. 
. 
. 
. 
. forval y = 1/3 {
  2.         matrix accuracy`y' = (predictionregress`y' \ predictionlogit`y' \ predictionprobit`y')
  3.         
.         matrix colnames accuracy`y' = correct_success correct_failure   inaccurate_success inaccurate_failure
  4.         matrix rownames accuracy`x'`y' = REGRESS LOGIT PROBIT
  5.         putexcel set "prediction.csv", sheet(COOKSD`y') modify
  6.         putexcel A1 = matrix(accuracy`x'`y'), names nformat(number_d2)
  7. 
. }
file prediction.csv saved
file prediction.csv saved
file prediction.csv saved

. 
. 
. ********************************************************************************
. ********************************************************************************
. *
. * Weighted, Clustered with household id
. *
. ********************************************************************************
. ********************************************************************************
. 
. global option = "[pweight=WGTRU13], vce(cluster DUID)"

. local list = "regress logit probit"

. 
. cap drop *_uhat* *_yhat*

. 
. foreach x in `list' {
  2. 
. `x' ${depvar} ${model1} ${option}
  3. estimates store `x'_1
  4. predict `x'_uhat1, stdp
  5. predict `x'_yhat1 
  6. 
. `x' ${depvar} ${model2} ${option}
  7. estimates store `x'_2
  8. predict `x'_uhat2, stdp
  9. predict `x'_yhat2 
 10. 
. `x' ${depvar} ${model3} ${option}
 11. estimates store `x'_3
 12. predict `x'_uhat3, stdp
 13. predict `x'_yhat3 
 14. 
. di "==========================================================================="
 15. }
(sum of wgt is 28,957,922.555278)
note: mz_wage omitted because of collinearity
note: mz_military omitted because of collinearity

Linear regression                               Number of obs     =      2,695
                                                F(4, 712)         =      35.73
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1023
                                                Root MSE          =     .47404

                                 (Std. Err. adjusted for 713 clusters in DUID)
------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0011923   .0025797     0.46   0.644    -.0038725     .006257
        wage |  -.0142461   .0020206    -7.05   0.000    -.0182131   -.0102791
    military |  -.4214607   .0526326    -8.01   0.000    -.5247944    -.318127
        race |  -.0323186   .0345265    -0.94   0.350    -.1001045    .0354674
     mz_wage |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .7685721   .1029791     7.46   0.000     .5663931    .9707512
------------------------------------------------------------------------------
(5,142 missing values generated)
(option xb assumed; fitted values)
(5,142 missing values generated)
(sum of wgt is 28,356,822.063077)
note: employed omitted because of collinearity
note: mz_wage omitted because of collinearity
note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity

Linear regression                               Number of obs     =      2,646
                                                F(4, 700)         =      35.39
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1051
                                                Root MSE          =     .47332

                                 (Std. Err. adjusted for 701 clusters in DUID)
------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0004613   .0026366     0.17   0.861    -.0047154     .005638
        wage |  -.0141473   .0020211    -7.00   0.000    -.0181154   -.0101792
    military |  -.4217405   .0537772    -7.84   0.000    -.5273245   -.3161565
        race |  -.0359067   .0347286    -1.03   0.302    -.1040915    .0322781
    employed |          0  (omitted)
     mz_wage |          0  (omitted)
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .8035001   .1042162     7.71   0.000     .5988863    1.008114
------------------------------------------------------------------------------
(5,191 missing values generated)
(option xb assumed; fitted values)
(5,191 missing values generated)
(sum of wgt is 50,287,132.927204)
note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity

Linear regression                               Number of obs     =      4,879
                                                F(4, 1245)        =     130.64
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0132
                                                Root MSE          =     .49324

                               (Std. Err. adjusted for 1,246 clusters in DUID)
------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |  -.0004196   .0017261    -0.24   0.808    -.0038061    .0029668
    military |  -.5362273   .0296964   -18.06   0.000    -.5944879   -.4779668
        race |  -.0441442   .0242386    -1.82   0.069    -.0916973    .0034089
    employed |  -.0706757   .0448651    -1.58   0.115    -.1586953    .0173438
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .7237895   .0836587     8.65   0.000      .559662     .887917
------------------------------------------------------------------------------
(2,931 missing values generated)
(option xb assumed; fitted values)
(2,931 missing values generated)
===========================================================================

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: mz_wage omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log pseudolikelihood =  -20046044  
Iteration 1:   log pseudolikelihood =  -18292416  
Iteration 2:   log pseudolikelihood =  -18272022  
Iteration 3:   log pseudolikelihood =  -18272006  
Iteration 4:   log pseudolikelihood =  -18272006  

Logistic regression                             Number of obs     =      2,692
                                                Wald chi2(3)      =      22.86
                                                Prob > chi2       =     0.0000
Log pseudolikelihood =  -18272006               Pseudo R2         =     0.0885

                                 (Std. Err. adjusted for 711 clusters in DUID)
------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0072246   .0114994     0.63   0.530    -.0153139     .029763
        wage |  -.0829001   .0180346    -4.60   0.000    -.1182471    -.047553
    military |          0  (omitted)
        race |  -.1533232   .1495159    -1.03   0.305     -.446369    .1397226
     mz_wage |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |     1.4242   .4943569     2.88   0.004     .4552778    2.393121
------------------------------------------------------------------------------
(5145 missing values generated)
(option pr assumed; Pr(unin))
(5,145 missing values generated)

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: employed omitted because of collinearity
note: mz_wage omitted because of collinearity
note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log pseudolikelihood =  -19629662  
Iteration 1:   log pseudolikelihood =  -17866808  
Iteration 2:   log pseudolikelihood =  -17844793  
Iteration 3:   log pseudolikelihood =  -17844774  
Iteration 4:   log pseudolikelihood =  -17844774  

Logistic regression                             Number of obs     =      2,643
                                                Wald chi2(3)      =      23.16
                                                Prob > chi2       =     0.0000
Log pseudolikelihood =  -17844774               Pseudo R2         =     0.0909

                                 (Std. Err. adjusted for 699 clusters in DUID)
------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0039448   .0117649     0.34   0.737     -.019114    .0270036
        wage |  -.0828296   .0181958    -4.55   0.000    -.1184928   -.0471665
    military |          0  (omitted)
        race |  -.1697804   .1504461    -1.13   0.259    -.4646495    .1250886
    employed |          0  (omitted)
     mz_wage |          0  (omitted)
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   1.588257   .5054914     3.14   0.002     .5975117    2.579001
------------------------------------------------------------------------------
(5194 missing values generated)
(option pr assumed; Pr(unin))
(5,194 missing values generated)

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log pseudolikelihood =  -34458379  
Iteration 1:   log pseudolikelihood =  -34143548  
Iteration 2:   log pseudolikelihood =  -34143456  
Iteration 3:   log pseudolikelihood =  -34143456  

Logistic regression                             Number of obs     =      4,876
                                                Wald chi2(3)      =       5.17
                                                Prob > chi2       =     0.1601
Log pseudolikelihood =  -34143456               Pseudo R2         =     0.0091

                               (Std. Err. adjusted for 1,244 clusters in DUID)
------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |  -.0017307   .0071044    -0.24   0.808    -.0156551    .0121937
    military |          0  (omitted)
        race |  -.1799469   .0995715    -1.81   0.071    -.3751034    .0152096
    employed |   -.293069   .1889508    -1.55   0.121    -.6634058    .0772677
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .9161049   .3516272     2.61   0.009     .2269282    1.605282
------------------------------------------------------------------------------
(2934 missing values generated)
(option pr assumed; Pr(unin))
(2,934 missing values generated)
===========================================================================

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: mz_wage omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log pseudolikelihood =  -20046044  
Iteration 1:   log pseudolikelihood =  -18332367  
Iteration 2:   log pseudolikelihood =  -18317970  
Iteration 3:   log pseudolikelihood =  -18317969  

Probit regression                               Number of obs     =      2,692
                                                Wald chi2(3)      =      23.92
                                                Prob > chi2       =     0.0000
Log pseudolikelihood =  -18317969               Pseudo R2         =     0.0862

                                 (Std. Err. adjusted for 711 clusters in DUID)
------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0035404   .0069626     0.51   0.611     -.010106    .0171868
        wage |  -.0471854    .010143    -4.65   0.000    -.0670654   -.0273054
    military |          0  (omitted)
        race |  -.0938519   .0914639    -1.03   0.305    -.2731179     .085414
     mz_wage |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |    .854289   .2955949     2.89   0.004     .2749336    1.433644
------------------------------------------------------------------------------
(5145 missing values generated)
(option pr assumed; Pr(unin))
(5,145 missing values generated)

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: employed omitted because of collinearity
note: mz_wage omitted because of collinearity
note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log pseudolikelihood =  -19629662  
Iteration 1:   log pseudolikelihood =  -17903004  
Iteration 2:   log pseudolikelihood =  -17888655  
Iteration 3:   log pseudolikelihood =  -17888654  

Probit regression                               Number of obs     =      2,643
                                                Wald chi2(3)      =      24.57
                                                Prob > chi2       =     0.0000
Log pseudolikelihood =  -17888654               Pseudo R2         =     0.0887

                                 (Std. Err. adjusted for 699 clusters in DUID)
------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |    .001566   .0071091     0.22   0.826    -.0123676    .0154995
        wage |    -.04716    .010189    -4.63   0.000    -.0671301     -.02719
    military |          0  (omitted)
        race |  -.1041943   .0921085    -1.13   0.258    -.2847236     .076335
    employed |          0  (omitted)
     mz_wage |          0  (omitted)
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .9544201   .3012929     3.17   0.002     .3638968    1.544943
------------------------------------------------------------------------------
(5194 missing values generated)
(option pr assumed; Pr(unin))
(5,194 missing values generated)

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log pseudolikelihood =  -34458379  
Iteration 1:   log pseudolikelihood =  -34141166  
Iteration 2:   log pseudolikelihood =  -34141124  
Iteration 3:   log pseudolikelihood =  -34141124  

Probit regression                               Number of obs     =      4,876
                                                Wald chi2(3)      =       5.28
                                                Prob > chi2       =     0.1522
Log pseudolikelihood =  -34141124               Pseudo R2         =     0.0092

                               (Std. Err. adjusted for 1,244 clusters in DUID)
------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   -.001039   .0043861    -0.24   0.813    -.0096357    .0075576
    military |          0  (omitted)
        race |  -.1132688   .0618949    -1.83   0.067    -.2345806    .0080431
    employed |  -.1824941   .1172582    -1.56   0.120    -.4123159    .0473277
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .5727931   .2171665     2.64   0.008     .1471545    .9984317
------------------------------------------------------------------------------
(2934 missing values generated)
(option pr assumed; Pr(unin))
(2,934 missing values generated)
===========================================================================

. 
. 
. local list = "regress logit probit"

. 
. forval x = 1/3 {
  2. 
.         stderr regress_uhat`x' logit_uhat`x' probit_uhat`x' 
  3.         matrix define stderr`x' = (regress_uhat`x', logit_uhat`x' ,probit_uhat`x' )
  4. 
. }
stderr of regress_uhat1 = 0
stderr of logit_uhat1 = 0
stderr of probit_uhat1 = 0
stderr of regress_uhat2 = 0
stderr of logit_uhat2 = 0
stderr of probit_uhat2 = 0
stderr of regress_uhat3 = 0
stderr of logit_uhat3 = 0
stderr of probit_uhat3 = 0

. 
. matrix stderr = stderr1\stderr2\stderr3

. matrix rownames stderr = stderr1 stderr2 stderr

. matrix colnames stderr =  REGRESS LOGIT PROBIT

. 
. putexcel set "output.csv", sheet(WGTCLUS) modify

. putexcel A1 = matrix(stderr), names nformat(number_d2)
file output.csv saved

. 
. 
. capture {
pweights not allowed

. 
. foreach x in `list' {
  2.         estimates table `x'_1 `x'_2 `x'_3 , ///
>           stats(N ll r2_p mrse) b(%7.3f) stfmt(%8.2f)
  3.           
.         sum `x'_yhat1 `x'_yhat2 `x'_yhat3 ${depvar}
  4.         
.         sum `x'_uhat1 `x'_uhat2 `x'_uhat3 ${depvar}
  5. }

--------------------------------------------------
    Variable | regress_1   regress_2   regress_3  
-------------+------------------------------------
         age |     0.001       0.000      -0.000  
        wage |    -0.014      -0.014              
    military |    -0.421      -0.422      -0.536  
        race |    -0.032      -0.036      -0.044  
     mz_wage | (omitted)   (omitted)              
 mz_military | (omitted)   (omitted)   (omitted)  
    employed |             (omitted)      -0.071  
 mz_employed |             (omitted)   (omitted)  
       _cons |     0.769       0.804       0.724  
-------------+------------------------------------
           N |      2695        2646        4879  
          ll |  -1809.83    -1772.87    -3472.18  
        r2_p |                                    
        mrse |                                    
--------------------------------------------------

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
regress_yh~1 |      2,750    .4999328    .1690612  -.5154983   .7559841
regress_yh~2 |      2,701    .5006753    .1717887  -.5259448   .7568344
regress_yh~3 |      4,961    .5661156    .0571744  -.0768953   .6729312
        unin |      7,892          .5    .5000317          0          1

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
regress_uh~1 |      7,892    .0186629    .0280014          0   .1353189
regress_uh~2 |      7,892    .0184873    .0281181          0   .1354858
regress_uh~3 |      7,892    .0261201    .0225319          0   .0907111
        unin |      7,892          .5    .5000317          0          1

--------------------------------------------------
    Variable |  logit_1     logit_2     logit_3   
-------------+------------------------------------
         age |     0.007       0.004      -0.002  
        wage |    -0.083      -0.083              
    military | (omitted)   (omitted)   (omitted)  
        race |    -0.153      -0.170      -0.180  
     mz_wage | (omitted)   (omitted)              
 mz_military | (omitted)   (omitted)   (omitted)  
    employed |             (omitted)      -0.293  
 mz_employed |             (omitted)   (omitted)  
       _cons |     1.424       1.588       0.916  
-------------+------------------------------------
           N |      2692        2643        4876  
          ll |  -1.8e+07    -1.8e+07    -3.4e+07  
        r2_p |      0.09        0.09        0.01  
        mrse |                                    
--------------------------------------------------

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
 logit_yhat1 |      2,747    .5060488     .169408   .0027496   .8018237
 logit_yhat2 |      2,698    .5069796    .1721808   .0025569   .8034077
 logit_yhat3 |      4,958    .5664414    .0552374   .4068317   .6700623
        unin |      7,892          .5    .5000317          0          1

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
 logit_uhat1 |      7,892    .0955192    .1550938          0   1.257258
 logit_uhat2 |      7,892    .0950928    .1564924          0   1.270868
 logit_uhat3 |      7,892    .1078501    .0931944          0   .3702402
        unin |      7,892          .5    .5000317          0          1

--------------------------------------------------
    Variable | probit_1    probit_2    probit_3   
-------------+------------------------------------
         age |     0.004       0.002      -0.001  
        wage |    -0.047      -0.047              
    military | (omitted)   (omitted)   (omitted)  
        race |    -0.094      -0.104      -0.113  
     mz_wage | (omitted)   (omitted)              
 mz_military | (omitted)   (omitted)   (omitted)  
    employed |             (omitted)      -0.182  
 mz_employed |             (omitted)   (omitted)  
       _cons |     0.854       0.954       0.573  
-------------+------------------------------------
           N |      2692        2643        4876  
          ll |  -1.8e+07    -1.8e+07    -3.4e+07  
        r2_p |      0.09        0.09        0.01  
        mrse |                                    
--------------------------------------------------

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
probit_yhat1 |      2,747    .5064606     .163427   .0003785   .7906356
probit_yhat2 |      2,698    .5074613    .1664226   .0003204   .7926199
probit_yhat3 |      4,958    .5667624    .0555524   .4065965   .6710809
        unin |      7,892          .5    .5000317          0          1

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
probit_uhat1 |      7,892    .0568792    .0907174          0   .7020473
probit_uhat2 |      7,892    .0565075    .0912771          0   .7062842
probit_uhat3 |      7,892    .0669826    .0577467          0    .228586
        unin |      7,892          .5    .5000317          0          1

. 
. local list = "regress logit probit"

. 
. forval y = 1/3 {
  2. foreach x in `list' {
  3.         
.                 estimates restore `x'_`y'
  4.                 
.                 noisily di "============================================================"
  5.                 noisily di "Model `x'_`y' " e(cmdline)
  6.                 noisily di "============================================================"
  7. 
.                 count if `x'_yhat`y' > .5 & ${depvar}==1 & e(sample)
  8.                 scalar x = r(N)
  9.                 count if ${depvar}==1 & e(sample)
 10.                 scalar y = r(N)
 11.                 scalar z1 = x/y
 12.                 noisily di "Correct Success Prediction Rate: " z1
 13.                 noisily di "predicted =" x ", Actual = " y
 14. 
.                 noisily di "  "
 15. 
.                 count if `x'_yhat`y'<.5 & ${depvar}==0 & e(sample)
 16.                 scalar x = r(N)
 17.                 count if ${depvar}==0 & e(sample) 
 18.                 scalar y = r(N)
 19.                 scalar z2 = x/y
 20.                 noisily di "Correct Failure Prediction Rate: " z2
 21.                 noisily di "predicted =" x ", Actual = " y
 22. 
.                 noisily di " "
 23.                 
.                 count if `x'_yhat`y'> .5 & ${depvar}==0 & e(sample)
 24.                 scalar x = r(N)
 25.                 count if ${depvar}==1 & e(sample)
 26.                 scalar y = r(N)
 27.                 scalar z3 = x/y
 28.                 noisily di "Incorrect Success Prediction Rate: " z3
 29.                 noisily di "predicted =" x ", Actual = " y
 30. 
.                 noisily di " "
 31.                 
.                 count if `x'_yhat`y'<.5 & ${depvar}==1 & e(sample)
 32.                 scalar x = r(N)
 33.                 count if ${depvar}==0 & e(sample)
 34.                 scalar y = r(N)
 35.                 scalar z4 = x/y
 36.                 noisily di "Incorrect Failure Prediction Rate: " z4
 37.                 noisily di "predicted =" x ", Actual = " y
 38.                 matrix define prediction`x'`y' = (z1, z2, z3, z4)
 39. 
. di "==========================================================================="
 40. }
 41. }
(results regress_1 are active now)
============================================================
Model regress_1 regress unin age wage military race mz_wage mz_military [pweight=WGTRU13], vce(cluster DUID)
============================================================
  1,137
  1,420
Correct Success Prediction Rate: .80070423
predicted =1137, Actual = 1420
  
  685
  1,275
Correct Failure Prediction Rate: .5372549
predicted =685, Actual = 1275
 
  590
  1,420
Incorrect Success Prediction Rate: .41549296
predicted =590, Actual = 1420
 
  283
  1,275
Incorrect Failure Prediction Rate: .22196078
predicted =283, Actual = 1275
===========================================================================
(results logit_1 are active now)
============================================================
Model logit_1 logit unin age wage military race mz_wage mz_military [pweight=WGTRU13], vce(cluster DUID)
============================================================
  1,110
  1,420
Correct Success Prediction Rate: .78169014
predicted =1110, Actual = 1420
  
  700
  1,272
Correct Failure Prediction Rate: .55031447
predicted =700, Actual = 1272
 
  572
  1,420
Incorrect Success Prediction Rate: .4028169
predicted =572, Actual = 1420
 
  310
  1,272
Incorrect Failure Prediction Rate: .24371069
predicted =310, Actual = 1272
===========================================================================
(results probit_1 are active now)
============================================================
Model probit_1 probit unin age wage military race mz_wage mz_military [pweight=WGTRU13], vce(cluster DUID)
============================================================
  1,108
  1,420
Correct Success Prediction Rate: .78028169
predicted =1108, Actual = 1420
  
  695
  1,272
Correct Failure Prediction Rate: .54638365
predicted =695, Actual = 1272
 
  577
  1,420
Incorrect Success Prediction Rate: .40633803
predicted =577, Actual = 1420
 
  312
  1,272
Incorrect Failure Prediction Rate: .24528302
predicted =312, Actual = 1272
===========================================================================
(results regress_2 are active now)
============================================================
Model regress_2 regress unin age wage military race employed mz_wage mz_employed mz_military [pweight=WGTRU13], vce(cluster DUID)
============================================================
  1,083
  1,389
Correct Success Prediction Rate: .77969762
predicted =1083, Actual = 1389
  
  695
  1,257
Correct Failure Prediction Rate: .55290374
predicted =695, Actual = 1257
 
  562
  1,389
Incorrect Success Prediction Rate: .40460763
predicted =562, Actual = 1389
 
  306
  1,257
Incorrect Failure Prediction Rate: .24343675
predicted =306, Actual = 1257
===========================================================================
(results logit_2 are active now)
============================================================
Model logit_2 logit unin age wage military race employed mz_wage mz_employed mz_military [pweight=WGTRU13], vce(cluster DUID)
============================================================
  1,062
  1,389
Correct Success Prediction Rate: .76457883
predicted =1062, Actual = 1389
  
  707
  1,254
Correct Failure Prediction Rate: .56379585
predicted =707, Actual = 1254
 
  547
  1,389
Incorrect Success Prediction Rate: .3938085
predicted =547, Actual = 1389
 
  327
  1,254
Incorrect Failure Prediction Rate: .26076555
predicted =327, Actual = 1254
===========================================================================
(results probit_2 are active now)
============================================================
Model probit_2 probit unin age wage military race employed mz_wage mz_employed mz_military [pweight=WGTRU13], vce(cluster DUID)
============================================================
  1,050
  1,389
Correct Success Prediction Rate: .75593952
predicted =1050, Actual = 1389
  
  683
  1,254
Correct Failure Prediction Rate: .5446571
predicted =683, Actual = 1254
 
  571
  1,389
Incorrect Success Prediction Rate: .41108711
predicted =571, Actual = 1389
 
  339
  1,254
Incorrect Failure Prediction Rate: .27033493
predicted =339, Actual = 1254
===========================================================================
(results regress_3 are active now)
============================================================
Model regress_3 regress unin age military race employed mz_employed mz_military [pweight=WGTRU13], vce(cluster DUID)
============================================================
  2,630
  2,917
Correct Success Prediction Rate: .90161124
predicted =2630, Actual = 2917
  
  261
  1,962
Correct Failure Prediction Rate: .13302752
predicted =261, Actual = 1962
 
  1,701
  2,917
Incorrect Success Prediction Rate: .58313336
predicted =1701, Actual = 2917
 
  287
  1,962
Incorrect Failure Prediction Rate: .14627931
predicted =287, Actual = 1962
===========================================================================
(results logit_3 are active now)
============================================================
Model logit_3 logit unin age military race employed mz_employed mz_military [pweight=WGTRU13], vce(cluster DUID)
============================================================
  2,599
  2,917
Correct Success Prediction Rate: .89098389
predicted =2599, Actual = 2917
  
  263
  1,959
Correct Failure Prediction Rate: .13425217
predicted =263, Actual = 1959
 
  1,696
  2,917
Incorrect Success Prediction Rate: .58141927
predicted =1696, Actual = 2917
 
  318
  1,959
Incorrect Failure Prediction Rate: .16232772
predicted =318, Actual = 1959
===========================================================================
(results probit_3 are active now)
============================================================
Model probit_3 probit unin age military race employed mz_employed mz_military [pweight=WGTRU13], vce(cluster DUID)
============================================================
  2,599
  2,917
Correct Success Prediction Rate: .89098389
predicted =2599, Actual = 2917
  
  263
  1,959
Correct Failure Prediction Rate: .13425217
predicted =263, Actual = 1959
 
  1,696
  2,917
Incorrect Success Prediction Rate: .58141927
predicted =1696, Actual = 2917
 
  318
  1,959
Incorrect Failure Prediction Rate: .16232772
predicted =318, Actual = 1959
===========================================================================

. 
. 
. 
. 
. forval y = 1/3 {
  2.         matrix accuracy`y' = (predictionregress`y' \ predictionlogit`y' \ predictionprobit`y')  
  3.         matrix colnames accuracy`y' = correct_success correct_failure   inaccurate_success inaccurate_failure
  4.         matrix rownames accuracy`x'`y' = REGRESS LOGIT PROBIT
  5.         putexcel set "prediction.csv", sheet(WGTCLUS`y') modify
  6.         putexcel A1 = matrix(accuracy`x'`y'), names nformat(number_d2)
  7. 
. }
file prediction.csv saved
file prediction.csv saved
file prediction.csv saved

. 
. 
. ********************************************************************************
. ********************************************************************************
. *
. * WEIGHTED ONLY
. * 
. ********************************************************************************
. ********************************************************************************
. 
. cap drop *uhat* *_yhat*

. global option = "[pweight=WGTRU13]"

. 
. local list = "regress logit probit"

. 
. foreach x in `list' {
  2. 
. `x' ${depvar} ${model1} ${option}
  3. estimates store `x'_1
  4. predict `x'_uhat1, stdp
  5. predict `x'_yhat1 
  6. 
. `x' ${depvar} ${model2} ${option}
  7. estimates store `x'_2
  8. predict `x'_uhat2, stdp
  9. predict `x'_yhat2 
 10. 
. `x' ${depvar} ${model3} ${option}
 11. estimates store `x'_3
 12. predict `x'_uhat3, stdp
 13. predict `x'_yhat3 
 14. di "==========================================================================="
 15. }
(sum of wgt is 28,957,922.555278)
note: mz_wage omitted because of collinearity
note: mz_military omitted because of collinearity

Linear regression                               Number of obs     =      2,695
                                                F(4, 2690)        =     100.57
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1023
                                                Root MSE          =     .47404

------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0011923   .0010345     1.15   0.249    -.0008363    .0032208
        wage |  -.0142461   .0009766   -14.59   0.000    -.0161609   -.0123312
    military |  -.4214607   .0399946   -10.54   0.000    -.4998839   -.3430375
        race |  -.0323186   .0110376    -2.93   0.003    -.0539616   -.0106755
     mz_wage |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .7685721   .0427457    17.98   0.000     .6847543    .8523899
------------------------------------------------------------------------------
(5,142 missing values generated)
(option xb assumed; fitted values)
(5,142 missing values generated)
(sum of wgt is 28,356,822.063077)
note: employed omitted because of collinearity
note: mz_wage omitted because of collinearity
note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity

Linear regression                               Number of obs     =      2,646
                                                F(4, 2641)        =     100.43
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1051
                                                Root MSE          =     .47332

------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0004613   .0010543     0.44   0.662     -.001606    .0025286
        wage |  -.0141473   .0009757   -14.50   0.000    -.0160605   -.0122342
    military |  -.4217405   .0410209   -10.28   0.000    -.5021769   -.3413041
        race |  -.0359067   .0111008    -3.23   0.001    -.0576738   -.0141396
    employed |          0  (omitted)
     mz_wage |          0  (omitted)
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .8035001   .0436021    18.43   0.000     .7180024    .8889978
------------------------------------------------------------------------------
(5,191 missing values generated)
(option xb assumed; fitted values)
(5,191 missing values generated)
(sum of wgt is 50,287,132.927204)
note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity

Linear regression                               Number of obs     =      4,879
                                                F(4, 4874)        =     347.95
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0132
                                                Root MSE          =     .49324

------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |  -.0004196   .0007087    -0.59   0.554    -.0018091    .0009698
    military |  -.5362273   .0165304   -32.44   0.000    -.5686344   -.5038203
        race |  -.0441442   .0081568    -5.41   0.000    -.0601353   -.0281531
    employed |  -.0706757   .0189154    -3.74   0.000    -.1077585    -.033593
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .7237895   .0337573    21.44   0.000     .6576099    .7899691
------------------------------------------------------------------------------
(2,931 missing values generated)
(option xb assumed; fitted values)
(2,931 missing values generated)
===========================================================================

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: mz_wage omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log pseudolikelihood =  -20046044  
Iteration 1:   log pseudolikelihood =  -18292416  
Iteration 2:   log pseudolikelihood =  -18272022  
Iteration 3:   log pseudolikelihood =  -18272006  
Iteration 4:   log pseudolikelihood =  -18272006  

Logistic regression                             Number of obs     =      2,692
                                                Wald chi2(3)      =      97.60
                                                Prob > chi2       =     0.0000
Log pseudolikelihood =  -18272006               Pseudo R2         =     0.0885

------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0072246   .0046234     1.56   0.118    -.0018372    .0162863
        wage |  -.0829001   .0088909    -9.32   0.000     -.100326   -.0654741
    military |          0  (omitted)
        race |  -.1533232    .048115    -3.19   0.001    -.2476269   -.0590194
     mz_wage |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |     1.4242   .2075738     6.86   0.000     1.017362    1.831037
------------------------------------------------------------------------------
(5145 missing values generated)
(option pr assumed; Pr(unin))
(5,145 missing values generated)

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: employed omitted because of collinearity
note: mz_wage omitted because of collinearity
note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log pseudolikelihood =  -19629662  
Iteration 1:   log pseudolikelihood =  -17866808  
Iteration 2:   log pseudolikelihood =  -17844793  
Iteration 3:   log pseudolikelihood =  -17844774  
Iteration 4:   log pseudolikelihood =  -17844774  

Logistic regression                             Number of obs     =      2,643
                                                Wald chi2(3)      =      99.52
                                                Prob > chi2       =     0.0000
Log pseudolikelihood =  -17844774               Pseudo R2         =     0.0909

------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0039448   .0047128     0.84   0.403    -.0052921    .0131817
        wage |  -.0828296   .0089836    -9.22   0.000    -.1004371   -.0652221
    military |          0  (omitted)
        race |  -.1697804   .0484519    -3.50   0.000    -.2647445   -.0748164
    employed |          0  (omitted)
     mz_wage |          0  (omitted)
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   1.588257   .2143906     7.41   0.000     1.168059    2.008454
------------------------------------------------------------------------------
(5194 missing values generated)
(option pr assumed; Pr(unin))
(5,194 missing values generated)

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log pseudolikelihood =  -34458379  
Iteration 1:   log pseudolikelihood =  -34143548  
Iteration 2:   log pseudolikelihood =  -34143456  
Iteration 3:   log pseudolikelihood =  -34143456  

Logistic regression                             Number of obs     =      4,876
                                                Wald chi2(3)      =      40.41
                                                Prob > chi2       =     0.0000
Log pseudolikelihood =  -34143456               Pseudo R2         =     0.0091

------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |  -.0017307   .0029166    -0.59   0.553    -.0074471    .0039858
    military |          0  (omitted)
        race |  -.1799469   .0335236    -5.37   0.000    -.2456519   -.1142418
    employed |   -.293069   .0795664    -3.68   0.000    -.4490163   -.1371218
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .9161049   .1417661     6.46   0.000     .6382484    1.193961
------------------------------------------------------------------------------
(2934 missing values generated)
(option pr assumed; Pr(unin))
(2,934 missing values generated)
===========================================================================

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: mz_wage omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log pseudolikelihood =  -20046044  
Iteration 1:   log pseudolikelihood =  -18332367  
Iteration 2:   log pseudolikelihood =  -18317970  
Iteration 3:   log pseudolikelihood =  -18317969  

Probit regression                               Number of obs     =      2,692
                                                Wald chi2(3)      =      97.27
                                                Prob > chi2       =     0.0000
Log pseudolikelihood =  -18317969               Pseudo R2         =     0.0862

------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0035404   .0028494     1.24   0.214    -.0020444    .0091252
        wage |  -.0471854   .0051779    -9.11   0.000    -.0573339   -.0370369
    military |          0  (omitted)
        race |  -.0938519     .02951    -3.18   0.001    -.1516905   -.0360134
     mz_wage |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |    .854289    .123832     6.90   0.000     .6115828    1.096995
------------------------------------------------------------------------------
(5145 missing values generated)
(option pr assumed; Pr(unin))
(5,145 missing values generated)

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: employed omitted because of collinearity
note: mz_wage omitted because of collinearity
note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log pseudolikelihood =  -19629662  
Iteration 1:   log pseudolikelihood =  -17903004  
Iteration 2:   log pseudolikelihood =  -17888655  
Iteration 3:   log pseudolikelihood =  -17888654  

Probit regression                               Number of obs     =      2,643
                                                Wald chi2(3)      =     101.27
                                                Prob > chi2       =     0.0000
Log pseudolikelihood =  -17888654               Pseudo R2         =     0.0887

------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |    .001566   .0028994     0.54   0.589    -.0041167    .0072486
        wage |    -.04716    .005201    -9.07   0.000    -.0573539   -.0369662
    military |          0  (omitted)
        race |  -.1041943   .0297454    -3.50   0.000    -.1624942   -.0458944
    employed |          0  (omitted)
     mz_wage |          0  (omitted)
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .9544201   .1274433     7.49   0.000     .7046358    1.204204
------------------------------------------------------------------------------
(5194 missing values generated)
(option pr assumed; Pr(unin))
(5,194 missing values generated)

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log pseudolikelihood =  -34458379  
Iteration 1:   log pseudolikelihood =  -34141166  
Iteration 2:   log pseudolikelihood =  -34141124  
Iteration 3:   log pseudolikelihood =  -34141124  

Probit regression                               Number of obs     =      4,876
                                                Wald chi2(3)      =      41.35
                                                Prob > chi2       =     0.0000
Log pseudolikelihood =  -34141124               Pseudo R2         =     0.0092

------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   -.001039   .0018013    -0.58   0.564    -.0045696    .0024915
    military |          0  (omitted)
        race |  -.1132688   .0208566    -5.43   0.000    -.1541469   -.0723907
    employed |  -.1824941   .0494028    -3.69   0.000    -.2793218   -.0856664
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .5727931   .0874837     6.55   0.000     .4013281    .7442581
------------------------------------------------------------------------------
(2934 missing values generated)
(option pr assumed; Pr(unin))
(2,934 missing values generated)
===========================================================================

. 
. local list = "regress logit probit"

. 
. forval x = 1/3 {
  2. 
.         stderr regress_uhat`x' logit_uhat`x' probit_uhat`x' 
  3.         matrix define stderr`x' = (regress_uhat`x', logit_uhat`x' ,probit_uhat`x' )
  4. 
. }
stderr of regress_uhat1 = 0
stderr of logit_uhat1 = 0
stderr of probit_uhat1 = 0
stderr of regress_uhat2 = 0
stderr of logit_uhat2 = 0
stderr of probit_uhat2 = 0
stderr of regress_uhat3 = 0
stderr of logit_uhat3 = 0
stderr of probit_uhat3 = 0

. 
. matrix stderr = stderr1\stderr2\stderr3

. matrix rownames stderr = stderr1 stderr2 stderr

. matrix colnames stderr =  REGRESS LOGIT PROBIT

. 
. putexcel set "output.csv", sheet(WEIGHTED) modify

. putexcel A1 = matrix(stderr), names nformat(number_d2)
file output.csv saved

. 
.  
. capture {
pweights not allowed

. 
. local list = "regress logit probit"

. foreach x in `list' {
  2.         estimates table `x'_1 `x'_2 `x'_3, ///
>           stats(N ll r2_p mrse) b(%7.3f) stfmt(%8.2f)
  3.           
.         sum `x'_yhat1 `x'_yhat2 `x'_yhat3 ${depvar}
  4.         
.         sum `x'_uhat1 `x'_uhat2 `x'_uhat3 
  5.         di "==========================================================================="
  6. }

--------------------------------------------------
    Variable | regress_1   regress_2   regress_3  
-------------+------------------------------------
         age |     0.001       0.000      -0.000  
        wage |    -0.014      -0.014              
    military |    -0.421      -0.422      -0.536  
        race |    -0.032      -0.036      -0.044  
     mz_wage | (omitted)   (omitted)              
 mz_military | (omitted)   (omitted)   (omitted)  
    employed |             (omitted)      -0.071  
 mz_employed |             (omitted)   (omitted)  
       _cons |     0.769       0.804       0.724  
-------------+------------------------------------
           N |      2695        2646        4879  
          ll |  -1809.83    -1772.87    -3472.18  
        r2_p |                                    
        mrse |                                    
--------------------------------------------------

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
regress_yh~1 |      2,750    .4999328    .1690612  -.5154983   .7559841
regress_yh~2 |      2,701    .5006753    .1717887  -.5259448   .7568344
regress_yh~3 |      4,961    .5661156    .0571744  -.0768953   .6729312
        unin |      7,892          .5    .5000317          0          1

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
regress_uh~1 |      7,892    .0073602    .0109211          0   .0670736
regress_uh~2 |      7,892    .0072985     .010967          0   .0670132
regress_uh~3 |      7,892    .0103565     .008675          0   .0321218
===========================================================================

--------------------------------------------------
    Variable |  logit_1     logit_2     logit_3   
-------------+------------------------------------
         age |     0.007       0.004      -0.002  
        wage |    -0.083      -0.083              
    military | (omitted)   (omitted)   (omitted)  
        race |    -0.153      -0.170      -0.180  
     mz_wage | (omitted)   (omitted)              
 mz_military | (omitted)   (omitted)   (omitted)  
    employed |             (omitted)      -0.293  
 mz_employed |             (omitted)   (omitted)  
       _cons |     1.424       1.588       0.916  
-------------+------------------------------------
           N |      2692        2643        4876  
          ll |  -1.8e+07    -1.8e+07    -3.4e+07  
        r2_p |      0.09        0.09        0.01  
        mrse |                                    
--------------------------------------------------

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
 logit_yhat1 |      2,747    .5060488     .169408   .0027496   .8018237
 logit_yhat2 |      2,698    .5069796    .1721808   .0025569   .8034077
 logit_yhat3 |      4,958    .5664414    .0552374   .4068317   .6700623
        unin |      7,892          .5    .5000317          0          1

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
 logit_uhat1 |      7,892    .0396395    .0678739          0   .6195202
 logit_uhat2 |      7,892    .0395683    .0686117          0   .6255109
 logit_uhat3 |      7,892    .0427743    .0359636          0    .131382
===========================================================================

--------------------------------------------------
    Variable | probit_1    probit_2    probit_3   
-------------+------------------------------------
         age |     0.004       0.002      -0.001  
        wage |    -0.047      -0.047              
    military | (omitted)   (omitted)   (omitted)  
        race |    -0.094      -0.104      -0.113  
     mz_wage | (omitted)   (omitted)              
 mz_military | (omitted)   (omitted)   (omitted)  
    employed |             (omitted)      -0.182  
 mz_employed |             (omitted)   (omitted)  
       _cons |     0.854       0.954       0.573  
-------------+------------------------------------
           N |      2692        2643        4876  
          ll |  -1.8e+07    -1.8e+07    -3.4e+07  
        r2_p |      0.09        0.09        0.01  
        mrse |                                    
--------------------------------------------------

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
probit_yhat1 |      2,747    .5064606     .163427   .0003785   .7906356
probit_yhat2 |      2,698    .5074613    .1664226   .0003204   .7926199
probit_yhat3 |      4,958    .5667624    .0555524   .4065965   .6710809
        unin |      7,892          .5    .5000317          0          1

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
probit_uhat1 |      7,892    .0238061     .040048          0    .360074
probit_uhat2 |      7,892    .0236961    .0403102          0   .3614349
probit_uhat3 |      7,892    .0265758    .0222957          0   .0812817
===========================================================================

. 
. 
. 
. local list = "regress logit probit"

. 
. forval y = 1/3 {
  2. foreach x in `list' {
  3.         
.                 estimates restore `x'_`y'
  4.                 
.                 noisily di "============================================================"
  5.                 noisily di "Model `x'_`y' " e(cmdline)
  6.                 noisily di "============================================================"
  7. 
.                 count if `x'_yhat`y' > .5 & ${depvar}==1 & e(sample)
  8.                 scalar x = r(N)
  9.                 count if ${depvar}==1 & e(sample)
 10.                 scalar y = r(N)
 11.                 scalar z1 = x/y
 12.                 noisily di "Correct Success Prediction Rate: " z1
 13.                 noisily di "predicted =" x ", Actual = " y
 14. 
.                 noisily di "  "
 15. 
.                 count if `x'_yhat`y'<.5 & ${depvar}==0 & e(sample)
 16.                 scalar x = r(N)
 17.                 count if ${depvar}==0 & e(sample) 
 18.                 scalar y = r(N)
 19.                 scalar z2 = x/y
 20.                 noisily di "Correct Failure Prediction Rate: " z2
 21.                 noisily di "predicted =" x ", Actual = " y
 22. 
.                 noisily di " "
 23.                 
.                 count if `x'_yhat`y'> .5 & ${depvar}==0 & e(sample)
 24.                 scalar x = r(N)
 25.                 count if ${depvar}==1 & e(sample)
 26.                 scalar y = r(N)
 27.                 scalar z3 = x/y
 28.                 noisily di "Incorrect Success Prediction Rate: " z3
 29.                 noisily di "predicted =" x ", Actual = " y
 30. 
.                 noisily di " "
 31.                 
.                 count if `x'_yhat`y'<.5 & ${depvar}==1 & e(sample)
 32.                 scalar x = r(N)
 33.                 count if ${depvar}==0 & e(sample)
 34.                 scalar y = r(N)
 35.                 scalar z4 = x/y
 36.                 noisily di "Incorrect Failure Prediction Rate: " z4
 37.                 noisily di "predicted =" x ", Actual = " y
 38.                 matrix define prediction`x'`y' = (z1, z2, z3, z4)
 39. 
. di "==========================================================================="
 40. }
 41. }
(results regress_1 are active now)
============================================================
Model regress_1 regress unin age wage military race mz_wage mz_military [pweight=WGTRU13]
============================================================
  1,137
  1,420
Correct Success Prediction Rate: .80070423
predicted =1137, Actual = 1420
  
  685
  1,275
Correct Failure Prediction Rate: .5372549
predicted =685, Actual = 1275
 
  590
  1,420
Incorrect Success Prediction Rate: .41549296
predicted =590, Actual = 1420
 
  283
  1,275
Incorrect Failure Prediction Rate: .22196078
predicted =283, Actual = 1275
===========================================================================
(results logit_1 are active now)
============================================================
Model logit_1 logit unin age wage military race mz_wage mz_military [pweight=WGTRU13]
============================================================
  1,110
  1,420
Correct Success Prediction Rate: .78169014
predicted =1110, Actual = 1420
  
  700
  1,272
Correct Failure Prediction Rate: .55031447
predicted =700, Actual = 1272
 
  572
  1,420
Incorrect Success Prediction Rate: .4028169
predicted =572, Actual = 1420
 
  310
  1,272
Incorrect Failure Prediction Rate: .24371069
predicted =310, Actual = 1272
===========================================================================
(results probit_1 are active now)
============================================================
Model probit_1 probit unin age wage military race mz_wage mz_military [pweight=WGTRU13]
============================================================
  1,108
  1,420
Correct Success Prediction Rate: .78028169
predicted =1108, Actual = 1420
  
  695
  1,272
Correct Failure Prediction Rate: .54638365
predicted =695, Actual = 1272
 
  577
  1,420
Incorrect Success Prediction Rate: .40633803
predicted =577, Actual = 1420
 
  312
  1,272
Incorrect Failure Prediction Rate: .24528302
predicted =312, Actual = 1272
===========================================================================
(results regress_2 are active now)
============================================================
Model regress_2 regress unin age wage military race employed mz_wage mz_employed mz_military [pweight=WGTRU13]
============================================================
  1,083
  1,389
Correct Success Prediction Rate: .77969762
predicted =1083, Actual = 1389
  
  695
  1,257
Correct Failure Prediction Rate: .55290374
predicted =695, Actual = 1257
 
  562
  1,389
Incorrect Success Prediction Rate: .40460763
predicted =562, Actual = 1389
 
  306
  1,257
Incorrect Failure Prediction Rate: .24343675
predicted =306, Actual = 1257
===========================================================================
(results logit_2 are active now)
============================================================
Model logit_2 logit unin age wage military race employed mz_wage mz_employed mz_military [pweight=WGTRU13]
============================================================
  1,062
  1,389
Correct Success Prediction Rate: .76457883
predicted =1062, Actual = 1389
  
  707
  1,254
Correct Failure Prediction Rate: .56379585
predicted =707, Actual = 1254
 
  547
  1,389
Incorrect Success Prediction Rate: .3938085
predicted =547, Actual = 1389
 
  327
  1,254
Incorrect Failure Prediction Rate: .26076555
predicted =327, Actual = 1254
===========================================================================
(results probit_2 are active now)
============================================================
Model probit_2 probit unin age wage military race employed mz_wage mz_employed mz_military [pweight=WGTRU13]
============================================================
  1,050
  1,389
Correct Success Prediction Rate: .75593952
predicted =1050, Actual = 1389
  
  683
  1,254
Correct Failure Prediction Rate: .5446571
predicted =683, Actual = 1254
 
  571
  1,389
Incorrect Success Prediction Rate: .41108711
predicted =571, Actual = 1389
 
  339
  1,254
Incorrect Failure Prediction Rate: .27033493
predicted =339, Actual = 1254
===========================================================================
(results regress_3 are active now)
============================================================
Model regress_3 regress unin age military race employed mz_employed mz_military [pweight=WGTRU13]
============================================================
  2,630
  2,917
Correct Success Prediction Rate: .90161124
predicted =2630, Actual = 2917
  
  261
  1,962
Correct Failure Prediction Rate: .13302752
predicted =261, Actual = 1962
 
  1,701
  2,917
Incorrect Success Prediction Rate: .58313336
predicted =1701, Actual = 2917
 
  287
  1,962
Incorrect Failure Prediction Rate: .14627931
predicted =287, Actual = 1962
===========================================================================
(results logit_3 are active now)
============================================================
Model logit_3 logit unin age military race employed mz_employed mz_military [pweight=WGTRU13]
============================================================
  2,599
  2,917
Correct Success Prediction Rate: .89098389
predicted =2599, Actual = 2917
  
  263
  1,959
Correct Failure Prediction Rate: .13425217
predicted =263, Actual = 1959
 
  1,696
  2,917
Incorrect Success Prediction Rate: .58141927
predicted =1696, Actual = 2917
 
  318
  1,959
Incorrect Failure Prediction Rate: .16232772
predicted =318, Actual = 1959
===========================================================================
(results probit_3 are active now)
============================================================
Model probit_3 probit unin age military race employed mz_employed mz_military [pweight=WGTRU13]
============================================================
  2,599
  2,917
Correct Success Prediction Rate: .89098389
predicted =2599, Actual = 2917
  
  263
  1,959
Correct Failure Prediction Rate: .13425217
predicted =263, Actual = 1959
 
  1,696
  2,917
Incorrect Success Prediction Rate: .58141927
predicted =1696, Actual = 2917
 
  318
  1,959
Incorrect Failure Prediction Rate: .16232772
predicted =318, Actual = 1959
===========================================================================

. 
. 
. 
. 
. forval y = 1/3 {
  2.                 matrix accuracy`y' = (predictionregress`y' \ predictionlogit`y' \ predictionprobit`y')
  3.         matrix colnames accuracy`y' = correct_success correct_failure   inaccurate_success inaccurate_failure
  4.         matrix rownames accuracy`x'`y' = REGRESS LOGIT PROBIT
  5.         putexcel set "prediction.csv", sheet(WGT`y') modify
  6.         putexcel A1 = matrix(accuracy`x'`y'), names nformat(number_d2)
  7. 
. }
file prediction.csv saved
file prediction.csv saved
file prediction.csv saved

. 
. 
. 
. 
. ********************************************************************************
. ********************************************************************************
. *
. * Clustered Only
. *
. ********************************************************************************
. ********************************************************************************
. cap drop *_uhat* *_yhat*

. 
. global option = ", vce(cluster DUID)"

. 
. local list = "regress logit probit"

. 
. 
. foreach x in `list' {
  2. 
. `x' ${depvar} ${model1} ${option}
  3. estimates store `x'_1
  4. predict `x'_uhat1, stdp
  5. predict `x'_yhat1 
  6. 
. `x' ${depvar} ${model2} ${option}
  7. estimates store `x'_2
  8. predict `x'_uhat2, stdp
  9. predict `x'_yhat2 
 10. 
. `x' ${depvar} ${model3} ${option}
 11. estimates store `x'_3
 12. predict `x'_uhat3, stdp
 13. predict `x'_yhat3 
 14. di "==========================================================================="
 15. }
note: mz_wage omitted because of collinearity
note: mz_military omitted because of collinearity

Linear regression                               Number of obs     =      2,750
                                                F(4, 729)         =      38.34
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1353
                                                Root MSE          =     .46469

                                 (Std. Err. adjusted for 730 clusters in DUID)
------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0011268   .0020019     0.56   0.574    -.0028034     .005057
        wage |  -.0150225   .0014829   -10.13   0.000    -.0179337   -.0121113
    military |  -.3786897   .1017639    -3.72   0.000    -.5784749   -.1789044
        race |   -.050789   .0251614    -2.02   0.044    -.1001865   -.0013914
     mz_wage |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .8487996   .0811627    10.46   0.000      .689459     1.00814
------------------------------------------------------------------------------
(5,142 missing values generated)
(option xb assumed; fitted values)
(5,142 missing values generated)
note: employed omitted because of collinearity
note: mz_wage omitted because of collinearity
note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity

Linear regression                               Number of obs     =      2,701
                                                F(4, 717)         =      38.49
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1388
                                                Root MSE          =     .46383

                                 (Std. Err. adjusted for 718 clusters in DUID)
------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0005764   .0020274     0.28   0.776     -.003404    .0045567
        wage |  -.0148912   .0014901    -9.99   0.000    -.0178167   -.0119657
    military |  -.3753818   .1040368    -3.61   0.000    -.5796349   -.1711287
        race |  -.0547479   .0255709    -2.14   0.033    -.1049508   -.0045451
    employed |          0  (omitted)
     mz_wage |          0  (omitted)
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .8745663     .08171    10.70   0.000     .7141468    1.034986
------------------------------------------------------------------------------
(5,191 missing values generated)
(option xb assumed; fitted values)
(5,191 missing values generated)
note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity

Linear regression                               Number of obs     =      4,961
                                                F(4, 1272)        =      55.94
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0245
                                                Root MSE          =      .4848

                               (Std. Err. adjusted for 1,273 clusters in DUID)
------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   -.001382   .0013427    -1.03   0.304    -.0040163    .0012522
    military |  -.5332357   .0463841   -11.50   0.000    -.6242334    -.442238
        race |  -.0608736   .0182629    -3.33   0.001    -.0967022   -.0250449
    employed |  -.0820687   .0352989    -2.32   0.020    -.1513192   -.0128183
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .8324552   .0640503    13.00   0.000     .7067993    .9581111
------------------------------------------------------------------------------
(2,931 missing values generated)
(option xb assumed; fitted values)
(2,931 missing values generated)
===========================================================================

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: mz_wage omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log pseudolikelihood = -1899.8123  
Iteration 1:   log pseudolikelihood = -1674.4424  
Iteration 2:   log pseudolikelihood = -1669.4394  
Iteration 3:   log pseudolikelihood =  -1669.423  
Iteration 4:   log pseudolikelihood =  -1669.423  

Logistic regression                             Number of obs     =      2,747
                                                Wald chi2(3)      =      50.46
                                                Prob > chi2       =     0.0000
Log pseudolikelihood =  -1669.423               Pseudo R2         =     0.1213

                                 (Std. Err. adjusted for 728 clusters in DUID)
------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0075805   .0093456     0.81   0.417    -.0107366    .0258976
        wage |  -.0977672    .014694    -6.65   0.000     -.126567   -.0689674
    military |          0  (omitted)
        race |  -.2427449   .1133069    -2.14   0.032    -.4648224   -.0206674
     mz_wage |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   1.920186   .4073592     4.71   0.000     1.121777    2.718596
------------------------------------------------------------------------------
(5145 missing values generated)
(option pr assumed; Pr(unin))
(5,145 missing values generated)

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: employed omitted because of collinearity
note: mz_wage omitted because of collinearity
note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log pseudolikelihood = -1866.4771  
Iteration 1:   log pseudolikelihood = -1639.2099  
Iteration 2:   log pseudolikelihood = -1633.7983  
Iteration 3:   log pseudolikelihood = -1633.7807  
Iteration 4:   log pseudolikelihood = -1633.7807  

Logistic regression                             Number of obs     =      2,698
                                                Wald chi2(3)      =      51.03
                                                Prob > chi2       =     0.0000
Log pseudolikelihood = -1633.7807               Pseudo R2         =     0.1247

                                 (Std. Err. adjusted for 716 clusters in DUID)
------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0049546   .0094734     0.52   0.601    -.0136129    .0235222
        wage |  -.0978218   .0148286    -6.60   0.000    -.1268852   -.0687583
    military |          0  (omitted)
        race |  -.2610312   .1154446    -2.26   0.024    -.4872985   -.0347639
    employed |          0  (omitted)
     mz_wage |          0  (omitted)
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   2.053956   .4145615     4.95   0.000     1.241431    2.866482
------------------------------------------------------------------------------
(5194 missing values generated)
(option pr assumed; Pr(unin))
(5,194 missing values generated)

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log pseudolikelihood = -3343.0934  
Iteration 1:   log pseudolikelihood = -3284.2549  
Iteration 2:   log pseudolikelihood = -3284.1901  
Iteration 3:   log pseudolikelihood = -3284.1901  

Logistic regression                             Number of obs     =      4,958
                                                Wald chi2(3)      =      16.61
                                                Prob > chi2       =     0.0008
Log pseudolikelihood = -3284.1901               Pseudo R2         =     0.0176

                               (Std. Err. adjusted for 1,271 clusters in DUID)
------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |  -.0058648   .0057182    -1.03   0.305    -.0170722    .0053427
    military |          0  (omitted)
        race |  -.2543211   .0771222    -3.30   0.001    -.4054778   -.1031645
    employed |  -.3544965   .1558436    -2.27   0.023    -.6599444   -.0490486
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   1.397169   .2851303     4.90   0.000     .8383238    1.956014
------------------------------------------------------------------------------
(2934 missing values generated)
(option pr assumed; Pr(unin))
(2,934 missing values generated)
===========================================================================

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: mz_wage omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log pseudolikelihood = -1899.8123  
Iteration 1:   log pseudolikelihood = -1675.8333  
Iteration 2:   log pseudolikelihood = -1672.3896  
Iteration 3:   log pseudolikelihood = -1672.3851  
Iteration 4:   log pseudolikelihood = -1672.3851  

Probit regression                               Number of obs     =      2,747
                                                Wald chi2(3)      =      51.96
                                                Prob > chi2       =     0.0000
Log pseudolikelihood = -1672.3851               Pseudo R2         =     0.1197

                                 (Std. Err. adjusted for 728 clusters in DUID)
------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0040235   .0055591     0.72   0.469     -.006872    .0149191
        wage |  -.0565882   .0084622    -6.69   0.000    -.0731737   -.0400027
    military |          0  (omitted)
        race |  -.1493293   .0689085    -2.17   0.030    -.2843875   -.0142711
     mz_wage |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   1.157482   .2425672     4.77   0.000     .6820596    1.632905
------------------------------------------------------------------------------
(5145 missing values generated)
(option pr assumed; Pr(unin))
(5,145 missing values generated)

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: employed omitted because of collinearity
note: mz_wage omitted because of collinearity
note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log pseudolikelihood = -1866.4771  
Iteration 1:   log pseudolikelihood = -1640.3781  
Iteration 2:   log pseudolikelihood = -1636.6808  
Iteration 3:   log pseudolikelihood = -1636.6755  
Iteration 4:   log pseudolikelihood = -1636.6755  

Probit regression                               Number of obs     =      2,698
                                                Wald chi2(3)      =      52.87
                                                Prob > chi2       =     0.0000
Log pseudolikelihood = -1636.6755               Pseudo R2         =     0.1231

                                 (Std. Err. adjusted for 716 clusters in DUID)
------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0024574   .0056291     0.44   0.662    -.0085754    .0134902
        wage |  -.0565698   .0085214    -6.64   0.000    -.0732714   -.0398682
    military |          0  (omitted)
        race |  -.1608376   .0700882    -2.29   0.022     -.298208   -.0234672
    employed |          0  (omitted)
     mz_wage |          0  (omitted)
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   1.237932   .2461406     5.03   0.000     .7555052    1.720359
------------------------------------------------------------------------------
(5194 missing values generated)
(option pr assumed; Pr(unin))
(5,194 missing values generated)

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log pseudolikelihood = -3343.0934  
Iteration 1:   log pseudolikelihood = -3283.7017  
Iteration 2:   log pseudolikelihood = -3283.6812  
Iteration 3:   log pseudolikelihood = -3283.6812  

Probit regression                               Number of obs     =      4,958
                                                Wald chi2(3)      =      17.20
                                                Prob > chi2       =     0.0006
Log pseudolikelihood = -3283.6812               Pseudo R2         =     0.0178

                               (Std. Err. adjusted for 1,271 clusters in DUID)
------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |  -.0035483   .0034943    -1.02   0.310     -.010397    .0033003
    military |          0  (omitted)
        race |  -.1598313   .0477793    -3.35   0.001     -.253477   -.0661856
    employed |  -.2179443   .0955324    -2.28   0.023    -.4051845   -.0307042
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .8680282   .1733465     5.01   0.000     .5282753    1.207781
------------------------------------------------------------------------------
(2934 missing values generated)
(option pr assumed; Pr(unin))
(2,934 missing values generated)
===========================================================================

. 
. 
. local list = "regress logit probit"

. 
. forval x = 1/3 {
  2. 
.         stderr regress_uhat`x' logit_uhat`x' probit_uhat`x' 
  3.         matrix define stderr`x' = (regress_uhat`x', logit_uhat`x' ,probit_uhat`x' )
  4. 
. }
stderr of regress_uhat1 = 0
stderr of logit_uhat1 = 0
stderr of probit_uhat1 = 0
stderr of regress_uhat2 = 0
stderr of logit_uhat2 = 0
stderr of probit_uhat2 = 0
stderr of regress_uhat3 = 0
stderr of logit_uhat3 = 0
stderr of probit_uhat3 = 0

. 
. matrix stderr = stderr1\stderr2\stderr3

. matrix rownames stderr = stderr1 stderr2 stderr

. matrix colnames stderr =  REGRESS LOGIT PROBIT

. 
. putexcel set "output.csv", sheet(CLUSTERED) modify

. putexcel A1 = matrix(stderr), names nformat(number_d2)
file output.csv saved

. 
. capture {

Probit model for unin

              -------- True --------
Classified |         D            ~D  |      Total
-----------+--------------------------+-----------
     +     |      2662          1735  |       4397
     -     |       297           264  |        561
-----------+--------------------------+-----------
   Total   |      2959          1999  |       4958

Classified + if predicted Pr(D) >= .5
True D defined as unin != 0
--------------------------------------------------
Sensitivity                     Pr( +| D)   89.96%
Specificity                     Pr( -|~D)   13.21%
Positive predictive value       Pr( D| +)   60.54%
Negative predictive value       Pr(~D| -)   47.06%
--------------------------------------------------
False + rate for true ~D        Pr( +|~D)   86.79%
False - rate for true D         Pr( -| D)   10.04%
False + rate for classified +   Pr(~D| +)   39.46%
False - rate for classified -   Pr( D| -)   52.94%
--------------------------------------------------
Correctly classified                        59.02%
--------------------------------------------------

Probit model for unin, goodness-of-fit test

       number of observations =      4958
 number of covariate patterns =       337
            Pearson chi2(333) =      1640.27
                  Prob > chi2 =         0.0000

Probit model for unin, goodness-of-fit test

  (Table collapsed on quantiles of estimated probabilities)

       number of observations =      4958
             number of groups =        10
      Hosmer-Lemeshow chi2(8) =       244.44
                  Prob > chi2 =         0.0000

Probit model for unin, goodness-of-fit test

  (Table collapsed on quantiles of estimated probabilities)
  +--------------------------------------------------------+
  | Group |   Prob | Obs_1 | Exp_1 | Obs_0 | Exp_0 | Total |
  |-------+--------+-------+-------+-------+-------+-------|
  |     1 | 0.4959 |   259 | 224.7 |   242 | 276.3 |   501 |
  |     2 | 0.5383 |   320 | 258.2 |   179 | 240.8 |   499 |
  |     3 | 0.5636 |   214 | 281.1 |   293 | 225.9 |   507 |
  |     4 | 0.5831 |   196 | 288.2 |   305 | 212.8 |   501 |
  |     5 | 0.6010 |   235 | 280.1 |   238 | 192.9 |   473 |
  |-------+--------+-------+-------+-------+-------+-------|
  |     6 | 0.6286 |   317 | 306.2 |   179 | 189.8 |   496 |
  |     7 | 0.6415 |   364 | 327.4 |   151 | 187.6 |   515 |
  |     8 | 0.6547 |   384 | 321.8 |   112 | 174.2 |   496 |
  |     9 | 0.6872 |   278 | 321.7 |   204 | 160.3 |   482 |
  |    10 | 0.7426 |   392 | 351.5 |    96 | 136.5 |   488 |
  +--------------------------------------------------------+

       number of observations =      4958
             number of groups =        10
      Hosmer-Lemeshow chi2(8) =       244.44
                  Prob > chi2 =         0.0000

. 
. foreach x in `list' {
  2.         estimates table `x'_1 `x'_2 `x'_3, ///
>           stats(N ll r2_p mrse) b(%7.3f) stfmt(%8.2f)
  3.           
.         sum `x'_yhat1 `x'_yhat2 `x'_yhat3 ${depvar}
  4. 
. }

--------------------------------------------------
    Variable | regress_1   regress_2   regress_3  
-------------+------------------------------------
         age |     0.001       0.001      -0.001  
        wage |    -0.015      -0.015              
    military |    -0.379      -0.375      -0.533  
        race |    -0.051      -0.055      -0.061  
     mz_wage | (omitted)   (omitted)              
 mz_military | (omitted)   (omitted)   (omitted)  
    employed |             (omitted)      -0.082  
 mz_employed |             (omitted)   (omitted)  
       _cons |     0.849       0.875       0.832  
-------------+------------------------------------
           N |      2750        2701        4961  
          ll |  -1792.01    -1755.06    -3445.03  
        r2_p |                                    
        mrse |                                    
--------------------------------------------------

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
regress_yh~1 |      2,750    .5272727    .1836469  -.5791362   .8133374
regress_yh~2 |      2,701     .525361    .1860809  -.5876901   .8123071
regress_yh~3 |      4,961    .5964523    .0768151  -.0830075   .7494689
        unin |      7,892          .5    .5000317          0          1

--------------------------------------------------
    Variable |  logit_1     logit_2     logit_3   
-------------+------------------------------------
         age |     0.008       0.005      -0.006  
        wage |    -0.098      -0.098              
    military | (omitted)   (omitted)   (omitted)  
        race |    -0.243      -0.261      -0.254  
     mz_wage | (omitted)   (omitted)              
 mz_military | (omitted)   (omitted)   (omitted)  
    employed |             (omitted)      -0.354  
 mz_employed |             (omitted)   (omitted)  
       _cons |     1.920       2.054       1.397  
-------------+------------------------------------
           N |      2747        2698        4958  
          ll |  -1669.42    -1633.78    -3284.19  
        r2_p |      0.12        0.12        0.02  
        mrse |                                    
--------------------------------------------------

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
 logit_yhat1 |      2,747    .5278486    .1940327   .0009035     .85663
 logit_yhat2 |      2,698    .5259451    .1967009   .0008292   .8572529
 logit_yhat3 |      4,958    .5968132    .0754796   .3614471   .7405851
        unin |      7,892          .5    .5000317          0          1

--------------------------------------------------
    Variable | probit_1    probit_2    probit_3   
-------------+------------------------------------
         age |     0.004       0.002      -0.004  
        wage |    -0.057      -0.057              
    military | (omitted)   (omitted)   (omitted)  
        race |    -0.149      -0.161      -0.160  
     mz_wage | (omitted)   (omitted)              
 mz_military | (omitted)   (omitted)   (omitted)  
    employed |             (omitted)      -0.218  
 mz_employed |             (omitted)   (omitted)  
       _cons |     1.157       1.238       0.868  
-------------+------------------------------------
           N |      2747        2698        4958  
          ll |  -1672.39    -1636.68    -3283.68  
        r2_p |      0.12        0.12        0.02  
        mrse |                                    
--------------------------------------------------

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
probit_yhat1 |      2,747    .5292228    .1898114    .000024   .8546549
probit_yhat2 |      2,698    .5274524    .1925561   .0000194   .8553845
probit_yhat3 |      4,958    .5972345     .075901   .3613415   .7426135
        unin |      7,892          .5    .5000317          0          1

. 
. 
. local list = "regress logit probit"

. 
. forval y = 1/3 {
  2. foreach x in `list' {
  3.         
.                 estimates restore `x'_`y'
  4.                 
.                 noisily di "============================================================"
  5.                 noisily di "Model `x'_`y' " e(cmdline)
  6.                 noisily di "============================================================"
  7. 
.                 count if `x'_yhat`y' > .5 & ${depvar}==1 & e(sample)
  8.                 scalar x = r(N)
  9.                 count if ${depvar}==1 & e(sample)
 10.                 scalar y = r(N)
 11.                 scalar z1 = x/y
 12.                 noisily di "Correct Success Prediction Rate: " z1
 13.                 noisily di "predicted =" x ", Actual = " y
 14. 
.                 noisily di "  "
 15. 
.                 count if `x'_yhat`y'<.5 & ${depvar}==0 & e(sample)
 16.                 scalar x = r(N)
 17.                 count if ${depvar}==0 & e(sample) 
 18.                 scalar y = r(N)
 19.                 scalar z2 = x/y
 20.                 noisily di "Correct Failure Prediction Rate: " z2
 21.                 noisily di "predicted =" x ", Actual = " y
 22. 
.                 noisily di " "
 23.                 
.                 count if `x'_yhat`y'> .5 & ${depvar}==0 & e(sample)
 24.                 scalar x = r(N)
 25.                 count if ${depvar}==1 & e(sample)
 26.                 scalar y = r(N)
 27.                 scalar z3 = x/y
 28.                 noisily di "Incorrect Success Prediction Rate: " z3
 29.                 noisily di "predicted =" x ", Actual = " y
 30. 
.                 noisily di " "
 31.                 
.                 count if `x'_yhat`y'<.5 & ${depvar}==1 & e(sample)
 32.                 scalar x = r(N)
 33.                 count if ${depvar}==0 & e(sample)
 34.                 scalar y = r(N)
 35.                 scalar z4 = x/y
 36.                 noisily di "Incorrect Failure Prediction Rate: " z4
 37.                 noisily di "predicted =" x ", Actual = " y
 38.                 matrix define prediction`x'`y' = (z1, z2, z3, z4)
 39. 
. di "==========================================================================="
 40. }
 41. }
(results regress_1 are active now)
============================================================
Model regress_1 regress unin age wage military race mz_wage mz_military , vce(cluster DUID)
============================================================
  1,223
  1,450
Correct Success Prediction Rate: .84344828
predicted =1223, Actual = 1450
  
  586
  1,300
Correct Failure Prediction Rate: .45076923
predicted =586, Actual = 1300
 
  714
  1,450
Incorrect Success Prediction Rate: .49241379
predicted =714, Actual = 1450
 
  227
  1,300
Incorrect Failure Prediction Rate: .17461538
predicted =227, Actual = 1300
===========================================================================
(results logit_1 are active now)
============================================================
Model logit_1 logit unin age wage military race mz_wage mz_military , vce(cluster DUID)
============================================================
  1,143
  1,450
Correct Success Prediction Rate: .78827586
predicted =1143, Actual = 1450
  
  685
  1,297
Correct Failure Prediction Rate: .52814187
predicted =685, Actual = 1297
 
  612
  1,450
Incorrect Success Prediction Rate: .42206897
predicted =612, Actual = 1450
 
  307
  1,297
Incorrect Failure Prediction Rate: .23670008
predicted =307, Actual = 1297
===========================================================================
(results probit_1 are active now)
============================================================
Model probit_1 probit unin age wage military race mz_wage mz_military , vce(cluster DUID)
============================================================
  1,148
  1,450
Correct Success Prediction Rate: .79172414
predicted =1148, Actual = 1450
  
  666
  1,297
Correct Failure Prediction Rate: .51349268
predicted =666, Actual = 1297
 
  631
  1,450
Incorrect Success Prediction Rate: .43517241
predicted =631, Actual = 1450
 
  302
  1,297
Incorrect Failure Prediction Rate: .23284503
predicted =302, Actual = 1297
===========================================================================
(results regress_2 are active now)
============================================================
Model regress_2 regress unin age wage military race employed mz_wage mz_employed mz_military , vce(cluster DUID)
============================================================
  1,158
  1,419
Correct Success Prediction Rate: .81606765
predicted =1158, Actual = 1419
  
  570
  1,282
Correct Failure Prediction Rate: .44461778
predicted =570, Actual = 1282
 
  712
  1,419
Incorrect Success Prediction Rate: .5017618
predicted =712, Actual = 1419
 
  261
  1,282
Incorrect Failure Prediction Rate: .20358814
predicted =261, Actual = 1282
===========================================================================
(results logit_2 are active now)
============================================================
Model logit_2 logit unin age wage military race employed mz_wage mz_employed mz_military , vce(cluster DUID)
============================================================
  1,107
  1,419
Correct Success Prediction Rate: .78012685
predicted =1107, Actual = 1419
  
  696
  1,279
Correct Failure Prediction Rate: .54417514
predicted =696, Actual = 1279
 
  583
  1,419
Incorrect Success Prediction Rate: .41085271
predicted =583, Actual = 1419
 
  312
  1,279
Incorrect Failure Prediction Rate: .24394058
predicted =312, Actual = 1279
===========================================================================
(results probit_2 are active now)
============================================================
Model probit_2 probit unin age wage military race employed mz_wage mz_employed mz_military , vce(cluster DUID)
============================================================
  1,111
  1,419
Correct Success Prediction Rate: .78294574
predicted =1111, Actual = 1419
  
  689
  1,279
Correct Failure Prediction Rate: .53870211
predicted =689, Actual = 1279
 
  590
  1,419
Incorrect Success Prediction Rate: .41578576
predicted =590, Actual = 1419
 
  308
  1,279
Incorrect Failure Prediction Rate: .24081314
predicted =308, Actual = 1279
===========================================================================
(results regress_3 are active now)
============================================================
Model regress_3 regress unin age military race employed mz_employed mz_military , vce(cluster DUID)
============================================================
  2,693
  2,959
Correct Success Prediction Rate: .91010477
predicted =2693, Actual = 2959
  
  251
  2,002
Correct Failure Prediction Rate: .12537463
predicted =251, Actual = 2002
 
  1,751
  2,959
Incorrect Success Prediction Rate: .59175397
predicted =1751, Actual = 2959
 
  266
  2,002
Incorrect Failure Prediction Rate: .13286713
predicted =266, Actual = 2002
===========================================================================
(results logit_3 are active now)
============================================================
Model logit_3 logit unin age military race employed mz_employed mz_military , vce(cluster DUID)
============================================================
  2,658
  2,959
Correct Success Prediction Rate: .89827644
predicted =2658, Actual = 2959
  
  258
  1,999
Correct Failure Prediction Rate: .12906453
predicted =258, Actual = 1999
 
  1,741
  2,959
Incorrect Success Prediction Rate: .58837445
predicted =1741, Actual = 2959
 
  301
  1,999
Incorrect Failure Prediction Rate: .15057529
predicted =301, Actual = 1999
===========================================================================
(results probit_3 are active now)
============================================================
Model probit_3 probit unin age military race employed mz_employed mz_military , vce(cluster DUID)
============================================================
  2,662
  2,959
Correct Success Prediction Rate: .89962825
predicted =2662, Actual = 2959
  
  264
  1,999
Correct Failure Prediction Rate: .13206603
predicted =264, Actual = 1999
 
  1,735
  2,959
Incorrect Success Prediction Rate: .58634674
predicted =1735, Actual = 2959
 
  297
  1,999
Incorrect Failure Prediction Rate: .14857429
predicted =297, Actual = 1999
===========================================================================

. 
. 
. 
. forval y = 1/3 {
  2.         matrix accuracy`y' = (predictionregress`y' \ predictionlogit`y' \ predictionprobit`y')
  3.         matrix colnames accuracy`y' = correct_success correct_failure   inaccurate_success inaccurate_failure
  4.         matrix rownames accuracy`x'`y' = REGRESS LOGIT PROBIT
  5.         putexcel set "prediction.csv", sheet(CLUSTERED`y') modify
  6.         putexcel A1 = matrix(accuracy`x'`y'), names nformat(number_d2)
  7. 
. }
file prediction.csv saved
file prediction.csv saved
file prediction.csv saved

. 
. 
. 
. ********************************************************************************
. ********************************************************************************
. *
. * NO OPTIONS
. *
. ********************************************************************************
. *********************************************************************************
. 
. cap drop *uhat* *_yhat*

. 
. global option = " "

. 
. local list = "regress logit probit"

. 
. 
. foreach x in `list' {
  2. 
. `x' ${depvar} ${model1} ${option}
  3. estimates store `x'_1
  4. predict `x'_uhat1, stdp
  5. predict `x'_yhat1 
  6. 
. `x' ${depvar} ${model2} ${option}
  7. estimates store `x'_2
  8. predict `x'_uhat2, stdp
  9. predict `x'_yhat2 
 10. 
. `x' ${depvar} ${model3} ${option}
 11. estimates store `x'_3
 12. predict `x'_uhat3, stdp
 13. predict `x'_yhat3 
 14. di "==========================================================================="
 15. }
note: mz_wage omitted because of collinearity
note: mz_military omitted because of collinearity

      Source |       SS           df       MS      Number of obs   =     2,750
-------------+----------------------------------   F(4, 2745)      =    107.34
       Model |  92.7132339         4  23.1783085   Prob > F        =    0.0000
    Residual |  592.741312     2,745  .215934904   R-squared       =    0.1353
-------------+----------------------------------   Adj R-squared   =    0.1340
       Total |  685.454545     2,749   .24934687   Root MSE        =    .46469

------------------------------------------------------------------------------
        unin |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0011268   .0007855     1.43   0.152    -.0004135    .0026671
        wage |  -.0150225   .0007909   -18.99   0.000    -.0165734   -.0134716
    military |  -.3786897   .2685542    -1.41   0.159    -.9052783     .147899
        race |   -.050789   .0087605    -5.80   0.000    -.0679667   -.0336112
     mz_wage |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .8487996   .0335021    25.34   0.000     .7831077    .9144914
------------------------------------------------------------------------------
(5,142 missing values generated)
(option xb assumed; fitted values)
(5,142 missing values generated)
note: employed omitted because of collinearity
note: mz_wage omitted because of collinearity
note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity

      Source |       SS           df       MS      Number of obs   =     2,701
-------------+----------------------------------   F(4, 2696)      =    108.64
       Model |  93.4905003         4  23.3726251   Prob > F        =    0.0000
    Residual |  580.022273     2,696  .215141793   R-squared       =    0.1388
-------------+----------------------------------   Adj R-squared   =    0.1375
       Total |  673.512773     2,700  .249449175   Root MSE        =    .46383

------------------------------------------------------------------------------
        unin |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0005764   .0007942     0.73   0.468     -.000981    .0021337
        wage |  -.0148912   .0007914   -18.82   0.000    -.0164429   -.0133395
    military |  -.3753818   .2680627    -1.40   0.162    -.9010111    .1502475
        race |  -.0547479   .0088221    -6.21   0.000    -.0720467   -.0374492
    employed |          0  (omitted)
     mz_wage |          0  (omitted)
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .8745663   .0340004    25.72   0.000     .8078968    .9412358
------------------------------------------------------------------------------
(5,191 missing values generated)
(option xb assumed; fitted values)
(5,191 missing values generated)
note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity

      Source |       SS           df       MS      Number of obs   =     4,961
-------------+----------------------------------   F(4, 4956)      =     31.13
       Model |  29.2667663         4  7.31669158   Prob > F        =    0.0000
    Residual |  1164.83079     4,956  .235034462   R-squared       =    0.0245
-------------+----------------------------------   Adj R-squared   =    0.0237
       Total |  1194.09756     4,960  .240745476   Root MSE        =     .4848

------------------------------------------------------------------------------
        unin |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   -.001382   .0005625    -2.46   0.014    -.0024849   -.0002792
    military |  -.5332357    .280052    -1.90   0.057    -1.082262    .0157903
        race |  -.0608736   .0065854    -9.24   0.000    -.0737839   -.0479633
    employed |  -.0820687   .0155477    -5.28   0.000    -.1125492   -.0515883
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .8324552   .0269152    30.93   0.000     .7796895    .8852209
------------------------------------------------------------------------------
(2,931 missing values generated)
(option xb assumed; fitted values)
(2,931 missing values generated)
===========================================================================

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: mz_wage omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log likelihood = -1899.8123  
Iteration 1:   log likelihood = -1674.4424  
Iteration 2:   log likelihood = -1669.4394  
Iteration 3:   log likelihood =  -1669.423  
Iteration 4:   log likelihood =  -1669.423  

Logistic regression                             Number of obs     =      2,747
                                                LR chi2(3)        =     460.78
                                                Prob > chi2       =     0.0000
Log likelihood =  -1669.423                     Pseudo R2         =     0.1213

------------------------------------------------------------------------------
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0075805    .003651     2.08   0.038     .0004247    .0147363
        wage |  -.0977672   .0060963   -16.04   0.000    -.1097157   -.0858187
    military |          0  (omitted)
        race |  -.2427449    .040296    -6.02   0.000    -.3217236   -.1637661
     mz_wage |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   1.920186   .1673371    11.47   0.000     1.592212    2.248161
------------------------------------------------------------------------------
(5145 missing values generated)
(option pr assumed; Pr(unin))
(5,145 missing values generated)

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: employed omitted because of collinearity
note: mz_wage omitted because of collinearity
note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log likelihood = -1866.4771  
Iteration 1:   log likelihood = -1639.2099  
Iteration 2:   log likelihood = -1633.7983  
Iteration 3:   log likelihood = -1633.7807  
Iteration 4:   log likelihood = -1633.7807  

Logistic regression                             Number of obs     =      2,698
                                                LR chi2(3)        =     465.39
                                                Prob > chi2       =     0.0000
Log likelihood = -1633.7807                     Pseudo R2         =     0.1247

------------------------------------------------------------------------------
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0049546   .0036981     1.34   0.180    -.0022935    .0122027
        wage |  -.0978218   .0061422   -15.93   0.000    -.1098602   -.0857833
    military |          0  (omitted)
        race |  -.2610312    .040757    -6.40   0.000    -.3409135   -.1811489
    employed |          0  (omitted)
     mz_wage |          0  (omitted)
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   2.053956    .171346    11.99   0.000     1.718124    2.389788
------------------------------------------------------------------------------
(5194 missing values generated)
(option pr assumed; Pr(unin))
(5,194 missing values generated)

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log likelihood = -3343.0934  
Iteration 1:   log likelihood = -3284.2549  
Iteration 2:   log likelihood = -3284.1901  
Iteration 3:   log likelihood = -3284.1901  

Logistic regression                             Number of obs     =      4,958
                                                LR chi2(3)        =     117.81
                                                Prob > chi2       =     0.0000
Log likelihood = -3284.1901                     Pseudo R2         =     0.0176

------------------------------------------------------------------------------
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |  -.0058648   .0023935    -2.45   0.014    -.0105559   -.0011736
    military |          0  (omitted)
        race |  -.2543211    .027972    -9.09   0.000    -.3091452   -.1994971
    employed |  -.3544965   .0674315    -5.26   0.000    -.4866598   -.2223332
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   1.397169   .1172243    11.92   0.000     1.167413    1.626924
------------------------------------------------------------------------------
(2934 missing values generated)
(option pr assumed; Pr(unin))
(2,934 missing values generated)
===========================================================================

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: mz_wage omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log likelihood = -1899.8123  
Iteration 1:   log likelihood = -1675.8333  
Iteration 2:   log likelihood = -1672.3896  
Iteration 3:   log likelihood = -1672.3851  
Iteration 4:   log likelihood = -1672.3851  

Probit regression                               Number of obs     =      2,747
                                                LR chi2(3)        =     454.85
                                                Prob > chi2       =     0.0000
Log likelihood = -1672.3851                     Pseudo R2         =     0.1197

------------------------------------------------------------------------------
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0040235   .0021958     1.83   0.067    -.0002802    .0083273
        wage |  -.0565882   .0033272   -17.01   0.000    -.0631094    -.050067
    military |          0  (omitted)
        race |  -.1493293   .0247089    -6.04   0.000    -.1977578   -.1009007
     mz_wage |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   1.157482   .1001316    11.56   0.000     .9612281    1.353737
------------------------------------------------------------------------------
(5145 missing values generated)
(option pr assumed; Pr(unin))
(5,145 missing values generated)

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: employed omitted because of collinearity
note: mz_wage omitted because of collinearity
note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log likelihood = -1866.4771  
Iteration 1:   log likelihood = -1640.3781  
Iteration 2:   log likelihood = -1636.6808  
Iteration 3:   log likelihood = -1636.6755  
Iteration 4:   log likelihood = -1636.6755  

Probit regression                               Number of obs     =      2,698
                                                LR chi2(3)        =     459.60
                                                Prob > chi2       =     0.0000
Log likelihood = -1636.6755                     Pseudo R2         =     0.1231

------------------------------------------------------------------------------
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0024574   .0022241     1.10   0.269    -.0019017    .0068164
        wage |  -.0565698   .0033479   -16.90   0.000    -.0631315   -.0500081
    military |          0  (omitted)
        race |  -.1608376   .0249655    -6.44   0.000     -.209769   -.1119061
    employed |          0  (omitted)
     mz_wage |          0  (omitted)
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   1.237932   .1022995    12.10   0.000     1.037429    1.438435
------------------------------------------------------------------------------
(5194 missing values generated)
(option pr assumed; Pr(unin))
(5,194 missing values generated)

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log likelihood = -3343.0934  
Iteration 1:   log likelihood = -3283.7017  
Iteration 2:   log likelihood = -3283.6812  
Iteration 3:   log likelihood = -3283.6812  

Probit regression                               Number of obs     =      4,958
                                                LR chi2(3)        =     118.82
                                                Prob > chi2       =     0.0000
Log likelihood = -3283.6812                     Pseudo R2         =     0.0178

------------------------------------------------------------------------------
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |  -.0035483   .0014726    -2.41   0.016    -.0064346    -.000662
    military |          0  (omitted)
        race |  -.1598313   .0173366    -9.22   0.000    -.1938103   -.1258523
    employed |  -.2179443   .0413859    -5.27   0.000    -.2990591   -.1368296
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .8680282   .0715805    12.13   0.000     .7277331    1.008323
------------------------------------------------------------------------------
(2934 missing values generated)
(option pr assumed; Pr(unin))
(2,934 missing values generated)
===========================================================================

. 
. 
. local list = "regress logit probit"

. 
. forval x = 1/3 {
  2. 
.         stderr regress_uhat`x' logit_uhat`x' probit_uhat`x' 
  3.         matrix define stderr`x' = (regress_uhat`x', logit_uhat`x' ,probit_uhat`x' )
  4. 
. }
stderr of regress_uhat1 = 0
stderr of logit_uhat1 = 0
stderr of probit_uhat1 = 0
stderr of regress_uhat2 = 0
stderr of logit_uhat2 = 0
stderr of probit_uhat2 = 0
stderr of regress_uhat3 = 0
stderr of logit_uhat3 = 0
stderr of probit_uhat3 = 0

. 
. matrix stderr = stderr1\stderr2\stderr3

. matrix rownames stderr = stderr1 stderr2 stderr

. matrix colnames stderr =  REGRESS LOGIT PROBIT

. 
. putexcel set "output.csv", sheet(NONE) modify

. putexcel A1 = matrix(stderr), names nformat(number_d2)
file output.csv saved

. 
. 
. capture {

Probit model for unin

              -------- True --------
Classified |         D            ~D  |      Total
-----------+--------------------------+-----------
     +     |      2662          1735  |       4397
     -     |       297           264  |        561
-----------+--------------------------+-----------
   Total   |      2959          1999  |       4958

Classified + if predicted Pr(D) >= .5
True D defined as unin != 0
--------------------------------------------------
Sensitivity                     Pr( +| D)   89.96%
Specificity                     Pr( -|~D)   13.21%
Positive predictive value       Pr( D| +)   60.54%
Negative predictive value       Pr(~D| -)   47.06%
--------------------------------------------------
False + rate for true ~D        Pr( +|~D)   86.79%
False - rate for true D         Pr( -| D)   10.04%
False + rate for classified +   Pr(~D| +)   39.46%
False - rate for classified -   Pr( D| -)   52.94%
--------------------------------------------------
Correctly classified                        59.02%
--------------------------------------------------

Probit model for unin, goodness-of-fit test

       number of observations =      4958
 number of covariate patterns =       337
            Pearson chi2(333) =      1640.27
                  Prob > chi2 =         0.0000

Probit model for unin, goodness-of-fit test

  (Table collapsed on quantiles of estimated probabilities)

       number of observations =      4958
             number of groups =        10
      Hosmer-Lemeshow chi2(8) =       244.44
                  Prob > chi2 =         0.0000

Probit model for unin, goodness-of-fit test

  (Table collapsed on quantiles of estimated probabilities)
  +--------------------------------------------------------+
  | Group |   Prob | Obs_1 | Exp_1 | Obs_0 | Exp_0 | Total |
  |-------+--------+-------+-------+-------+-------+-------|
  |     1 | 0.4959 |   259 | 224.7 |   242 | 276.3 |   501 |
  |     2 | 0.5383 |   320 | 258.2 |   179 | 240.8 |   499 |
  |     3 | 0.5636 |   214 | 281.1 |   293 | 225.9 |   507 |
  |     4 | 0.5831 |   196 | 288.2 |   305 | 212.8 |   501 |
  |     5 | 0.6010 |   235 | 280.1 |   238 | 192.9 |   473 |
  |-------+--------+-------+-------+-------+-------+-------|
  |     6 | 0.6286 |   317 | 306.2 |   179 | 189.8 |   496 |
  |     7 | 0.6415 |   364 | 327.4 |   151 | 187.6 |   515 |
  |     8 | 0.6547 |   384 | 321.8 |   112 | 174.2 |   496 |
  |     9 | 0.6872 |   278 | 321.7 |   204 | 160.3 |   482 |
  |    10 | 0.7426 |   392 | 351.5 |    96 | 136.5 |   488 |
  +--------------------------------------------------------+

       number of observations =      4958
             number of groups =        10
      Hosmer-Lemeshow chi2(8) =       244.44
                  Prob > chi2 =         0.0000

. 
. foreach x in `list' {
  2. 
.         estimates table `x'_1 `x'_2 `x'_3, ///
>           stats(N ll r2_p mrse) b(%7.3f) stfmt(%8.2f)
  3.           
.         sum `x'_yhat1 `x'_yhat2 `x'_yhat3 ${depvar}
  4.         sum `x'_uhat1 `x'_uhat2 `x'_uhat3 
  5. }

--------------------------------------------------
    Variable | regress_1   regress_2   regress_3  
-------------+------------------------------------
         age |     0.001       0.001      -0.001  
        wage |    -0.015      -0.015              
    military |    -0.379      -0.375      -0.533  
        race |    -0.051      -0.055      -0.061  
     mz_wage | (omitted)   (omitted)              
 mz_military | (omitted)   (omitted)   (omitted)  
    employed |             (omitted)      -0.082  
 mz_employed |             (omitted)   (omitted)  
       _cons |     0.849       0.875       0.832  
-------------+------------------------------------
           N |      2750        2701        4961  
          ll |  -1792.01    -1755.06    -3445.03  
        r2_p |                                    
        mrse |                                    
--------------------------------------------------

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
regress_yh~1 |      2,750    .5272727    .1836469  -.5791362   .8133374
regress_yh~2 |      2,701     .525361    .1860809  -.5876901   .8123071
regress_yh~3 |      4,961    .5964523    .0768151  -.0830075   .7494689
        unin |      7,892          .5    .5000317          0          1

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
regress_uh~1 |      7,892    .0059306     .010082          0   .2686174
regress_uh~2 |      7,892    .0058685    .0100934          0    .268128
regress_uh~3 |      7,892    .0084731     .008782          0   .2800392

--------------------------------------------------
    Variable |  logit_1     logit_2     logit_3   
-------------+------------------------------------
         age |     0.008       0.005      -0.006  
        wage |    -0.098      -0.098              
    military | (omitted)   (omitted)   (omitted)  
        race |    -0.243      -0.261      -0.254  
     mz_wage | (omitted)   (omitted)              
 mz_military | (omitted)   (omitted)   (omitted)  
    employed |             (omitted)      -0.354  
 mz_employed |             (omitted)   (omitted)  
       _cons |     1.920       2.054       1.397  
-------------+------------------------------------
           N |      2747        2698        4958  
          ll |  -1669.42    -1633.78    -3284.19  
        r2_p |      0.12        0.12        0.02  
        mrse |                                    
--------------------------------------------------

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
 logit_yhat1 |      2,747    .5278486    .1940327   .0009035     .85663
 logit_yhat2 |      2,698    .5259451    .1967009   .0008292   .8572529
 logit_yhat3 |      4,958    .5968132    .0754796   .3614471   .7405851
        unin |      7,892          .5    .5000317          0          1

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
 logit_uhat1 |      7,892    .0308499    .0503672          0   .4298832
 logit_uhat2 |      7,892    .0307012    .0507677          0   .4339904
 logit_uhat3 |      7,892    .0357367    .0300022          0   .1113625

--------------------------------------------------
    Variable | probit_1    probit_2    probit_3   
-------------+------------------------------------
         age |     0.004       0.002      -0.004  
        wage |    -0.057      -0.057              
    military | (omitted)   (omitted)   (omitted)  
        race |    -0.149      -0.161      -0.160  
     mz_wage | (omitted)   (omitted)              
 mz_military | (omitted)   (omitted)   (omitted)  
    employed |             (omitted)      -0.218  
 mz_employed |             (omitted)   (omitted)  
       _cons |     1.157       1.238       0.868  
-------------+------------------------------------
           N |      2747        2698        4958  
          ll |  -1672.39    -1636.68    -3283.68  
        r2_p |      0.12        0.12        0.02  
        mrse |                                    
--------------------------------------------------

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
probit_yhat1 |      2,747    .5292228    .1898114    .000024   .8546549
probit_yhat2 |      2,698    .5274524    .1925561   .0000194   .8553845
probit_yhat3 |      4,958    .5972345     .075901   .3613415   .7426135
        unin |      7,892          .5    .5000317          0          1

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
probit_uhat1 |      7,892    .0181471    .0288812          0   .2344849
probit_uhat2 |      7,892    .0180358     .029068          0   .2362827
probit_uhat3 |      7,892    .0220541    .0184799          0   .0690144

. 
. 
. local list = "regress logit probit"

. 
. forval y = 1/3 {
  2. foreach x in `list' {
  3.         
.                 estimates restore `x'_`y'
  4.                 
.                 noisily di "============================================================"
  5.                 noisily di "Model `x'_`y' " e(cmdline)
  6.                 noisily di "============================================================"
  7. 
.                 count if `x'_yhat`y' > .5 & ${depvar}==1 & e(sample)
  8.                 scalar x = r(N)
  9.                 count if ${depvar}==1 & e(sample)
 10.                 scalar y = r(N)
 11.                 scalar z1 = x/y
 12.                 noisily di "Correct Success Prediction Rate: " z1
 13.                 noisily di "predicted =" x ", Actual = " y
 14. 
.                 noisily di "  "
 15. 
.                 count if `x'_yhat`y'<.5 & ${depvar}==0 & e(sample)
 16.                 scalar x = r(N)
 17.                 count if ${depvar}==0 & e(sample) 
 18.                 scalar y = r(N)
 19.                 scalar z2 = x/y
 20.                 noisily di "Correct Failure Prediction Rate: " z2
 21.                 noisily di "predicted =" x ", Actual = " y
 22. 
.                 noisily di " "
 23.                 
.                 count if `x'_yhat`y'> .5 & ${depvar}==0 & e(sample)
 24.                 scalar x = r(N)
 25.                 count if ${depvar}==1 & e(sample)
 26.                 scalar y = r(N)
 27.                 scalar z3 = x/y
 28.                 noisily di "Incorrect Success Prediction Rate: " z3
 29.                 noisily di "predicted =" x ", Actual = " y
 30. 
.                 noisily di " "
 31.                 
.                 count if `x'_yhat`y'<.5 & ${depvar}==1 & e(sample)
 32.                 scalar x = r(N)
 33.                 count if ${depvar}==0 & e(sample)
 34.                 scalar y = r(N)
 35.                 scalar z4 = x/y
 36.                 noisily di "Incorrect Failure Prediction Rate: " z4
 37.                 noisily di "predicted =" x ", Actual = " y
 38.                 matrix define prediction`x'`y' = (z1, z2, z3, z4)
 39. 
. di "==========================================================================="
 40. }
 41. }
(results regress_1 are active now)
============================================================
Model regress_1 regress unin age wage military race mz_wage mz_military  
============================================================
  1,223
  1,450
Correct Success Prediction Rate: .84344828
predicted =1223, Actual = 1450
  
  586
  1,300
Correct Failure Prediction Rate: .45076923
predicted =586, Actual = 1300
 
  714
  1,450
Incorrect Success Prediction Rate: .49241379
predicted =714, Actual = 1450
 
  227
  1,300
Incorrect Failure Prediction Rate: .17461538
predicted =227, Actual = 1300
===========================================================================
(results logit_1 are active now)
============================================================
Model logit_1 logit unin age wage military race mz_wage mz_military  
============================================================
  1,143
  1,450
Correct Success Prediction Rate: .78827586
predicted =1143, Actual = 1450
  
  685
  1,297
Correct Failure Prediction Rate: .52814187
predicted =685, Actual = 1297
 
  612
  1,450
Incorrect Success Prediction Rate: .42206897
predicted =612, Actual = 1450
 
  307
  1,297
Incorrect Failure Prediction Rate: .23670008
predicted =307, Actual = 1297
===========================================================================
(results probit_1 are active now)
============================================================
Model probit_1 probit unin age wage military race mz_wage mz_military  
============================================================
  1,148
  1,450
Correct Success Prediction Rate: .79172414
predicted =1148, Actual = 1450
  
  666
  1,297
Correct Failure Prediction Rate: .51349268
predicted =666, Actual = 1297
 
  631
  1,450
Incorrect Success Prediction Rate: .43517241
predicted =631, Actual = 1450
 
  302
  1,297
Incorrect Failure Prediction Rate: .23284503
predicted =302, Actual = 1297
===========================================================================
(results regress_2 are active now)
============================================================
Model regress_2 regress unin age wage military race employed mz_wage mz_employed mz_military  
============================================================
  1,158
  1,419
Correct Success Prediction Rate: .81606765
predicted =1158, Actual = 1419
  
  570
  1,282
Correct Failure Prediction Rate: .44461778
predicted =570, Actual = 1282
 
  712
  1,419
Incorrect Success Prediction Rate: .5017618
predicted =712, Actual = 1419
 
  261
  1,282
Incorrect Failure Prediction Rate: .20358814
predicted =261, Actual = 1282
===========================================================================
(results logit_2 are active now)
============================================================
Model logit_2 logit unin age wage military race employed mz_wage mz_employed mz_military  
============================================================
  1,107
  1,419
Correct Success Prediction Rate: .78012685
predicted =1107, Actual = 1419
  
  696
  1,279
Correct Failure Prediction Rate: .54417514
predicted =696, Actual = 1279
 
  583
  1,419
Incorrect Success Prediction Rate: .41085271
predicted =583, Actual = 1419
 
  312
  1,279
Incorrect Failure Prediction Rate: .24394058
predicted =312, Actual = 1279
===========================================================================
(results probit_2 are active now)
============================================================
Model probit_2 probit unin age wage military race employed mz_wage mz_employed mz_military  
============================================================
  1,111
  1,419
Correct Success Prediction Rate: .78294574
predicted =1111, Actual = 1419
  
  689
  1,279
Correct Failure Prediction Rate: .53870211
predicted =689, Actual = 1279
 
  590
  1,419
Incorrect Success Prediction Rate: .41578576
predicted =590, Actual = 1419
 
  308
  1,279
Incorrect Failure Prediction Rate: .24081314
predicted =308, Actual = 1279
===========================================================================
(results regress_3 are active now)
============================================================
Model regress_3 regress unin age military race employed mz_employed mz_military  
============================================================
  2,693
  2,959
Correct Success Prediction Rate: .91010477
predicted =2693, Actual = 2959
  
  251
  2,002
Correct Failure Prediction Rate: .12537463
predicted =251, Actual = 2002
 
  1,751
  2,959
Incorrect Success Prediction Rate: .59175397
predicted =1751, Actual = 2959
 
  266
  2,002
Incorrect Failure Prediction Rate: .13286713
predicted =266, Actual = 2002
===========================================================================
(results logit_3 are active now)
============================================================
Model logit_3 logit unin age military race employed mz_employed mz_military  
============================================================
  2,658
  2,959
Correct Success Prediction Rate: .89827644
predicted =2658, Actual = 2959
  
  258
  1,999
Correct Failure Prediction Rate: .12906453
predicted =258, Actual = 1999
 
  1,741
  2,959
Incorrect Success Prediction Rate: .58837445
predicted =1741, Actual = 2959
 
  301
  1,999
Incorrect Failure Prediction Rate: .15057529
predicted =301, Actual = 1999
===========================================================================
(results probit_3 are active now)
============================================================
Model probit_3 probit unin age military race employed mz_employed mz_military  
============================================================
  2,662
  2,959
Correct Success Prediction Rate: .89962825
predicted =2662, Actual = 2959
  
  264
  1,999
Correct Failure Prediction Rate: .13206603
predicted =264, Actual = 1999
 
  1,735
  2,959
Incorrect Success Prediction Rate: .58634674
predicted =1735, Actual = 2959
 
  297
  1,999
Incorrect Failure Prediction Rate: .14857429
predicted =297, Actual = 1999
===========================================================================

. 
. 
. 
. 
. forval y = 1/3 {
  2.         matrix accuracy`y' = (predictionregress`y' \ predictionlogit`y' \ predictionprobit`y')
  3.         matrix colnames accuracy`y' = correct_success correct_failure   inaccurate_success inaccurate_failure
  4.         matrix rownames accuracy`x'`y' = REGRESS LOGIT PROBIT
  5.         putexcel set "prediction.csv", sheet(NO_OPTIONS`y') modify
  6.         putexcel A1 = matrix(accuracy`x'`y'), names nformat(number_d2)
  7. 
. }
file prediction.csv saved
file prediction.csv saved
file prediction.csv saved

. 
. 
. ********************************************************************************
. ********************************************************************************
. *
. * Robust Only
. * 
. ********************************************************************************
. ********************************************************************************
. 
. 
. 
. cap drop *_uhat* *_yhat*

. 
. global option = ", robust "

. 
. local list = "regress logit probit"

. 
. 
. foreach x in `list' {
  2. 
. `x' ${depvar} ${model1} ${option}
  3. estimates store `x'_1
  4. predict `x'_uhat1, stdp
  5. predict `x'_yhat1 
  6. 
. `x' ${depvar} ${model2} ${option}
  7. estimates store `x'_2
  8. predict `x'_uhat2, stdp
  9. predict `x'_yhat2 
 10. 
. `x' ${depvar} ${model3} ${option}
 11. estimates store `x'_3
 12. predict `x'_uhat3, stdp
 13. predict `x'_yhat3 
 14. di "==========================================================================="
 15. }
note: mz_wage omitted because of collinearity
note: mz_military omitted because of collinearity

Linear regression                               Number of obs     =      2,750
                                                F(4, 2745)        =     162.80
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1353
                                                Root MSE          =     .46469

------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0011268   .0008288     1.36   0.174    -.0004984     .002752
        wage |  -.0150225   .0006763   -22.21   0.000    -.0163487   -.0136963
    military |  -.3786897   .0853747    -4.44   0.000    -.5460949   -.2112844
        race |   -.050789   .0089471    -5.68   0.000    -.0683327   -.0332452
     mz_wage |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .8487996   .0337456    25.15   0.000     .7826302    .9149689
------------------------------------------------------------------------------
(5,142 missing values generated)
(option xb assumed; fitted values)
(5,142 missing values generated)
note: employed omitted because of collinearity
note: mz_wage omitted because of collinearity
note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity

Linear regression                               Number of obs     =      2,701
                                                F(4, 2696)        =     164.35
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1388
                                                Root MSE          =     .46383

------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0005764   .0008397     0.69   0.493    -.0010701    .0022228
        wage |  -.0148912    .000678   -21.96   0.000    -.0162206   -.0135618
    military |  -.3753818   .0873216    -4.30   0.000    -.5466058   -.2041578
        race |  -.0547479   .0090319    -6.06   0.000    -.0724581   -.0370378
    employed |          0  (omitted)
     mz_wage |          0  (omitted)
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .8745663   .0341342    25.62   0.000     .8076345    .9414981
------------------------------------------------------------------------------
(5,191 missing values generated)
(option xb assumed; fitted values)
(5,191 missing values generated)
note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity

Linear regression                               Number of obs     =      4,961
                                                F(4, 4956)        =     106.69
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0245
                                                Root MSE          =      .4848

------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   -.001382   .0005772    -2.39   0.017    -.0025135   -.0002506
    military |  -.5332357   .0352176   -15.14   0.000    -.6022778   -.4641935
        race |  -.0608736   .0065814    -9.25   0.000     -.073776   -.0479711
    employed |  -.0820687   .0152683    -5.38   0.000    -.1120014   -.0521361
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .8324552   .0267904    31.07   0.000     .7799342    .8849762
------------------------------------------------------------------------------
(2,931 missing values generated)
(option xb assumed; fitted values)
(2,931 missing values generated)
===========================================================================

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: mz_wage omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log pseudolikelihood = -1899.8123  
Iteration 1:   log pseudolikelihood = -1674.4424  
Iteration 2:   log pseudolikelihood = -1669.4394  
Iteration 3:   log pseudolikelihood =  -1669.423  
Iteration 4:   log pseudolikelihood =  -1669.423  

Logistic regression                             Number of obs     =      2,747
                                                Wald chi2(3)      =     249.14
                                                Prob > chi2       =     0.0000
Log pseudolikelihood =  -1669.423               Pseudo R2         =     0.1213

------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0075805   .0038679     1.96   0.050    -5.18e-07    .0151615
        wage |  -.0977672   .0067143   -14.56   0.000    -.1109271   -.0846073
    military |          0  (omitted)
        race |  -.2427449   .0403576    -6.01   0.000    -.3218443   -.1636455
     mz_wage |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   1.920186    .170159    11.28   0.000     1.586681    2.253692
------------------------------------------------------------------------------
(5145 missing values generated)
(option pr assumed; Pr(unin))
(5,145 missing values generated)

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: employed omitted because of collinearity
note: mz_wage omitted because of collinearity
note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log pseudolikelihood = -1866.4771  
Iteration 1:   log pseudolikelihood = -1639.2099  
Iteration 2:   log pseudolikelihood = -1633.7983  
Iteration 3:   log pseudolikelihood = -1633.7807  
Iteration 4:   log pseudolikelihood = -1633.7807  

Logistic regression                             Number of obs     =      2,698
                                                Wald chi2(3)      =     252.12
                                                Prob > chi2       =     0.0000
Log pseudolikelihood = -1633.7807               Pseudo R2         =     0.1247

------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0049546     .00392     1.26   0.206    -.0027285    .0126378
        wage |  -.0978218   .0067845   -14.42   0.000    -.1111192   -.0845243
    military |          0  (omitted)
        race |  -.2610312   .0408679    -6.39   0.000    -.3411307   -.1809317
    employed |          0  (omitted)
     mz_wage |          0  (omitted)
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   2.053956   .1742953    11.78   0.000     1.712344    2.395569
------------------------------------------------------------------------------
(5194 missing values generated)
(option pr assumed; Pr(unin))
(5,194 missing values generated)

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log pseudolikelihood = -3343.0934  
Iteration 1:   log pseudolikelihood = -3284.2549  
Iteration 2:   log pseudolikelihood = -3284.1901  
Iteration 3:   log pseudolikelihood = -3284.1901  

Logistic regression                             Number of obs     =      4,958
                                                Wald chi2(3)      =     113.29
                                                Prob > chi2       =     0.0000
Log pseudolikelihood = -3284.1901               Pseudo R2         =     0.0176

------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |  -.0058648   .0024567    -2.39   0.017    -.0106799   -.0010497
    military |          0  (omitted)
        race |  -.2543211    .027831    -9.14   0.000     -.308869   -.1997733
    employed |  -.3544965   .0674934    -5.25   0.000     -.486781   -.2222119
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   1.397169   .1192638    11.71   0.000     1.163416    1.630922
------------------------------------------------------------------------------
(2934 missing values generated)
(option pr assumed; Pr(unin))
(2,934 missing values generated)
===========================================================================

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: mz_wage omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log pseudolikelihood = -1899.8123  
Iteration 1:   log pseudolikelihood = -1675.8333  
Iteration 2:   log pseudolikelihood = -1672.3896  
Iteration 3:   log pseudolikelihood = -1672.3851  
Iteration 4:   log pseudolikelihood = -1672.3851  

Probit regression                               Number of obs     =      2,747
                                                Wald chi2(3)      =     242.86
                                                Prob > chi2       =     0.0000
Log pseudolikelihood = -1672.3851               Pseudo R2         =     0.1197

------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0040235   .0023259     1.73   0.084    -.0005351    .0085821
        wage |  -.0565882   .0040118   -14.11   0.000    -.0644512   -.0487252
    military |          0  (omitted)
        race |  -.1493293     .02463    -6.06   0.000    -.1976031   -.1010554
     mz_wage |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   1.157482   .1013452    11.42   0.000     .9588496    1.356115
------------------------------------------------------------------------------
(5145 missing values generated)
(option pr assumed; Pr(unin))
(5,145 missing values generated)

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: employed omitted because of collinearity
note: mz_wage omitted because of collinearity
note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log pseudolikelihood = -1866.4771  
Iteration 1:   log pseudolikelihood = -1640.3781  
Iteration 2:   log pseudolikelihood = -1636.6808  
Iteration 3:   log pseudolikelihood = -1636.6755  
Iteration 4:   log pseudolikelihood = -1636.6755  

Probit regression                               Number of obs     =      2,698
                                                Wald chi2(3)      =     248.49
                                                Prob > chi2       =     0.0000
Log pseudolikelihood = -1636.6755               Pseudo R2         =     0.1231

------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0024574   .0023554     1.04   0.297    -.0021591    .0070739
        wage |  -.0565698   .0040401   -14.00   0.000    -.0644883   -.0486513
    military |          0  (omitted)
        race |  -.1608376   .0249058    -6.46   0.000     -.209652   -.1120231
    employed |          0  (omitted)
     mz_wage |          0  (omitted)
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   1.237932   .1035061    11.96   0.000     1.035064      1.4408
------------------------------------------------------------------------------
(5194 missing values generated)
(option pr assumed; Pr(unin))
(5,194 missing values generated)

note: military != 0 predicts failure perfectly
      military dropped and 3 obs not used

note: mz_employed omitted because of collinearity
note: mz_military omitted because of collinearity
Iteration 0:   log pseudolikelihood = -3343.0934  
Iteration 1:   log pseudolikelihood = -3283.7017  
Iteration 2:   log pseudolikelihood = -3283.6812  
Iteration 3:   log pseudolikelihood = -3283.6812  

Probit regression                               Number of obs     =      4,958
                                                Wald chi2(3)      =     117.10
                                                Prob > chi2       =     0.0000
Log pseudolikelihood = -3283.6812               Pseudo R2         =     0.0178

------------------------------------------------------------------------------
             |               Robust
        unin |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |  -.0035483   .0015026    -2.36   0.018    -.0064935   -.0006032
    military |          0  (omitted)
        race |  -.1598313   .0172585    -9.26   0.000    -.1936574   -.1260052
    employed |  -.2179443   .0413777    -5.27   0.000    -.2990432   -.1368455
 mz_employed |          0  (omitted)
 mz_military |          0  (omitted)
       _cons |   .8680282   .0724948    11.97   0.000     .7259411    1.010115
------------------------------------------------------------------------------
(2934 missing values generated)
(option pr assumed; Pr(unin))
(2,934 missing values generated)
===========================================================================

. 
. 
. local list = "regress logit probit"

. 
. forval x = 1/3 {
  2. 
.         stderr regress_uhat`x' logit_uhat`x' probit_uhat`x' 
  3.         matrix define stderr`x' = (regress_uhat`x', logit_uhat`x' ,probit_uhat`x' )
  4. 
. }
stderr of regress_uhat1 = 0
stderr of logit_uhat1 = 0
stderr of probit_uhat1 = 0
stderr of regress_uhat2 = 0
stderr of logit_uhat2 = 0
stderr of probit_uhat2 = 0
stderr of regress_uhat3 = 0
stderr of logit_uhat3 = 0
stderr of probit_uhat3 = 0

. 
. matrix stderr = stderr1\stderr2\stderr3

. matrix rownames stderr = stderr1 stderr2 stderr3

. matrix colnames stderr =  REGRESS LOGIT PROBIT

. 
. putexcel set "output.csv", sheet(ROBUST) modify

. putexcel A1 = matrix(stderr), names nformat(number_d2)
file output.csv saved

. 
. 
. capture {

Probit model for unin

              -------- True --------
Classified |         D            ~D  |      Total
-----------+--------------------------+-----------
     +     |      2662          1735  |       4397
     -     |       297           264  |        561
-----------+--------------------------+-----------
   Total   |      2959          1999  |       4958

Classified + if predicted Pr(D) >= .5
True D defined as unin != 0
--------------------------------------------------
Sensitivity                     Pr( +| D)   89.96%
Specificity                     Pr( -|~D)   13.21%
Positive predictive value       Pr( D| +)   60.54%
Negative predictive value       Pr(~D| -)   47.06%
--------------------------------------------------
False + rate for true ~D        Pr( +|~D)   86.79%
False - rate for true D         Pr( -| D)   10.04%
False + rate for classified +   Pr(~D| +)   39.46%
False - rate for classified -   Pr( D| -)   52.94%
--------------------------------------------------
Correctly classified                        59.02%
--------------------------------------------------

Probit model for unin, goodness-of-fit test

       number of observations =      4958
 number of covariate patterns =       337
            Pearson chi2(333) =      1640.27
                  Prob > chi2 =         0.0000

Probit model for unin, goodness-of-fit test

  (Table collapsed on quantiles of estimated probabilities)

       number of observations =      4958
             number of groups =        10
      Hosmer-Lemeshow chi2(8) =       244.44
                  Prob > chi2 =         0.0000

Probit model for unin, goodness-of-fit test

  (Table collapsed on quantiles of estimated probabilities)
  +--------------------------------------------------------+
  | Group |   Prob | Obs_1 | Exp_1 | Obs_0 | Exp_0 | Total |
  |-------+--------+-------+-------+-------+-------+-------|
  |     1 | 0.4959 |   259 | 224.7 |   242 | 276.3 |   501 |
  |     2 | 0.5383 |   320 | 258.2 |   179 | 240.8 |   499 |
  |     3 | 0.5636 |   214 | 281.1 |   293 | 225.9 |   507 |
  |     4 | 0.5831 |   196 | 288.2 |   305 | 212.8 |   501 |
  |     5 | 0.6010 |   235 | 280.1 |   238 | 192.9 |   473 |
  |-------+--------+-------+-------+-------+-------+-------|
  |     6 | 0.6286 |   317 | 306.2 |   179 | 189.8 |   496 |
  |     7 | 0.6415 |   364 | 327.4 |   151 | 187.6 |   515 |
  |     8 | 0.6547 |   384 | 321.8 |   112 | 174.2 |   496 |
  |     9 | 0.6872 |   278 | 321.7 |   204 | 160.3 |   482 |
  |    10 | 0.7426 |   392 | 351.5 |    96 | 136.5 |   488 |
  +--------------------------------------------------------+

       number of observations =      4958
             number of groups =        10
      Hosmer-Lemeshow chi2(8) =       244.44
                  Prob > chi2 =         0.0000

. 
. foreach x in `list' {
  2. 
. estimates table `x'_1 `x'_2 `x'_3, ///
>   stats(N ll r2_p mrse) b(%7.3f) stfmt(%8.2f)
  3.   
. sum `x'_yhat1 `x'_yhat2 `x'_yhat3 ${depvar}
  4. 
. sum `x'_uhat1 `x'_uhat2 `x'_uhat3
  5. di "==========================================================================="
  6. }

--------------------------------------------------
    Variable | regress_1   regress_2   regress_3  
-------------+------------------------------------
         age |     0.001       0.001      -0.001  
        wage |    -0.015      -0.015              
    military |    -0.379      -0.375      -0.533  
        race |    -0.051      -0.055      -0.061  
     mz_wage | (omitted)   (omitted)              
 mz_military | (omitted)   (omitted)   (omitted)  
    employed |             (omitted)      -0.082  
 mz_employed |             (omitted)   (omitted)  
       _cons |     0.849       0.875       0.832  
-------------+------------------------------------
           N |      2750        2701        4961  
          ll |  -1792.01    -1755.06    -3445.03  
        r2_p |                                    
        mrse |                                    
--------------------------------------------------

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
regress_yh~1 |      2,750    .5272727    .1836469  -.5791362   .8133374
regress_yh~2 |      2,701     .525361    .1860809  -.5876901   .8123071
regress_yh~3 |      4,961    .5964523    .0768151  -.0830075   .7494689
        unin |      7,892          .5    .5000317          0          1

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
regress_uh~1 |      7,892    .0057922    .0086278          0   .0857135
regress_uh~2 |      7,892    .0057355    .0086659          0   .0876607
regress_uh~3 |      7,892    .0083925    .0070597          0   .0350362
===========================================================================

--------------------------------------------------
    Variable |  logit_1     logit_2     logit_3   
-------------+------------------------------------
         age |     0.008       0.005      -0.006  
        wage |    -0.098      -0.098              
    military | (omitted)   (omitted)   (omitted)  
        race |    -0.243      -0.261      -0.254  
     mz_wage | (omitted)   (omitted)              
 mz_military | (omitted)   (omitted)   (omitted)  
    employed |             (omitted)      -0.354  
 mz_employed |             (omitted)   (omitted)  
       _cons |     1.920       2.054       1.397  
-------------+------------------------------------
           N |      2747        2698        4958  
          ll |  -1669.42    -1633.78    -3284.19  
        r2_p |      0.12        0.12        0.02  
        mrse |                                    
--------------------------------------------------

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
 logit_yhat1 |      2,747    .5278486    .1940327   .0009035     .85663
 logit_yhat2 |      2,698    .5259451    .1967009   .0008292   .8572529
 logit_yhat3 |      4,958    .5968132    .0754796   .3614471   .7405851
        unin |      7,892          .5    .5000317          0          1

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
 logit_uhat1 |      7,892    .0320989     .053542          0    .469605
 logit_uhat2 |      7,892    .0319975    .0541149          0   .4756895
 logit_uhat3 |      7,892    .0358884    .0302685          0    .111825
===========================================================================

--------------------------------------------------
    Variable | probit_1    probit_2    probit_3   
-------------+------------------------------------
         age |     0.004       0.002      -0.004  
        wage |    -0.057      -0.057              
    military | (omitted)   (omitted)   (omitted)  
        race |    -0.149      -0.161      -0.160  
     mz_wage | (omitted)   (omitted)              
 mz_military | (omitted)   (omitted)   (omitted)  
    employed |             (omitted)      -0.218  
 mz_employed |             (omitted)   (omitted)  
       _cons |     1.157       1.238       0.868  
-------------+------------------------------------
           N |      2747        2698        4958  
          ll |  -1672.39    -1636.68    -3283.68  
        r2_p |      0.12        0.12        0.02  
        mrse |                                    
--------------------------------------------------

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
probit_yhat1 |      2,747    .5292228    .1898114    .000024   .8546549
probit_yhat2 |      2,698    .5274524    .1925561   .0000194   .8553845
probit_yhat3 |      4,958    .5972345     .075901   .3613415   .7426135
        unin |      7,892          .5    .5000317          0          1

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
probit_uhat1 |      7,892    .0193362    .0320913          0   .2799158
probit_uhat2 |      7,892    .0192333    .0323346          0   .2817717
probit_uhat3 |      7,892    .0221134    .0185958          0   .0692467
===========================================================================

. 
. 
. local list = "regress logit probit"

. 
. forval y = 1/3 {
  2. foreach x in `list' {
  3.         
.                 estimates restore `x'_`y'
  4.                 
.                 noisily di "============================================================"
  5.                 noisily di "Model `x'_`y' " e(cmdline)
  6.                 noisily di "============================================================"
  7. 
.                 count if `x'_yhat`y' > .5 & ${depvar}==1 & e(sample)
  8.                 scalar x = r(N)
  9.                 count if ${depvar}==1 & e(sample)
 10.                 scalar y = r(N)
 11.                 scalar z1 = x/y
 12.                 noisily di "Correct Success Prediction Rate: " z1
 13.                 noisily di "predicted =" x ", Actual = " y
 14. 
.                 noisily di "  "
 15. 
.                 count if `x'_yhat`y'<.5 & ${depvar}==0 & e(sample)
 16.                 scalar x = r(N)
 17.                 count if ${depvar}==0 & e(sample) 
 18.                 scalar y = r(N)
 19.                 scalar z2 = x/y
 20.                 noisily di "Correct Failure Prediction Rate: " z2
 21.                 noisily di "predicted =" x ", Actual = " y
 22. 
.                 noisily di " "
 23.                 
.                 count if `x'_yhat`y'> .5 & ${depvar}==0 & e(sample)
 24.                 scalar x = r(N)
 25.                 count if ${depvar}==1 & e(sample)
 26.                 scalar y = r(N)
 27.                 scalar z3 = x/y
 28.                 noisily di "Incorrect Success Prediction Rate: " z3
 29.                 noisily di "predicted =" x ", Actual = " y
 30. 
.                 noisily di " "
 31.                 
.                 count if `x'_yhat`y'<.5 & ${depvar}==1 & e(sample)
 32.                 scalar x = r(N)
 33.                 count if ${depvar}==0 & e(sample)
 34.                 scalar y = r(N)
 35.                 scalar z4 = x/y
 36.                 noisily di "Incorrect Failure Prediction Rate: " z4
 37.                 noisily di "predicted =" x ", Actual = " y
 38.                 matrix define prediction`x'`y' = (z1, z2, z3, z4)
 39. 
. di "==========================================================================="
 40. }
 41. }
(results regress_1 are active now)
============================================================
Model regress_1 regress unin age wage military race mz_wage mz_military , robust 
============================================================
  1,223
  1,450
Correct Success Prediction Rate: .84344828
predicted =1223, Actual = 1450
  
  586
  1,300
Correct Failure Prediction Rate: .45076923
predicted =586, Actual = 1300
 
  714
  1,450
Incorrect Success Prediction Rate: .49241379
predicted =714, Actual = 1450
 
  227
  1,300
Incorrect Failure Prediction Rate: .17461538
predicted =227, Actual = 1300
===========================================================================
(results logit_1 are active now)
============================================================
Model logit_1 logit unin age wage military race mz_wage mz_military , robust 
============================================================
  1,143
  1,450
Correct Success Prediction Rate: .78827586
predicted =1143, Actual = 1450
  
  685
  1,297
Correct Failure Prediction Rate: .52814187
predicted =685, Actual = 1297
 
  612
  1,450
Incorrect Success Prediction Rate: .42206897
predicted =612, Actual = 1450
 
  307
  1,297
Incorrect Failure Prediction Rate: .23670008
predicted =307, Actual = 1297
===========================================================================
(results probit_1 are active now)
============================================================
Model probit_1 probit unin age wage military race mz_wage mz_military , robust 
============================================================
  1,148
  1,450
Correct Success Prediction Rate: .79172414
predicted =1148, Actual = 1450
  
  666
  1,297
Correct Failure Prediction Rate: .51349268
predicted =666, Actual = 1297
 
  631
  1,450
Incorrect Success Prediction Rate: .43517241
predicted =631, Actual = 1450
 
  302
  1,297
Incorrect Failure Prediction Rate: .23284503
predicted =302, Actual = 1297
===========================================================================
(results regress_2 are active now)
============================================================
Model regress_2 regress unin age wage military race employed mz_wage mz_employed mz_military , robust 
============================================================
  1,158
  1,419
Correct Success Prediction Rate: .81606765
predicted =1158, Actual = 1419
  
  570
  1,282
Correct Failure Prediction Rate: .44461778
predicted =570, Actual = 1282
 
  712
  1,419
Incorrect Success Prediction Rate: .5017618
predicted =712, Actual = 1419
 
  261
  1,282
Incorrect Failure Prediction Rate: .20358814
predicted =261, Actual = 1282
===========================================================================
(results logit_2 are active now)
============================================================
Model logit_2 logit unin age wage military race employed mz_wage mz_employed mz_military , robust 
============================================================
  1,107
  1,419
Correct Success Prediction Rate: .78012685
predicted =1107, Actual = 1419
  
  696
  1,279
Correct Failure Prediction Rate: .54417514
predicted =696, Actual = 1279
 
  583
  1,419
Incorrect Success Prediction Rate: .41085271
predicted =583, Actual = 1419
 
  312
  1,279
Incorrect Failure Prediction Rate: .24394058
predicted =312, Actual = 1279
===========================================================================
(results probit_2 are active now)
============================================================
Model probit_2 probit unin age wage military race employed mz_wage mz_employed mz_military , robust 
============================================================
  1,111
  1,419
Correct Success Prediction Rate: .78294574
predicted =1111, Actual = 1419
  
  689
  1,279
Correct Failure Prediction Rate: .53870211
predicted =689, Actual = 1279
 
  590
  1,419
Incorrect Success Prediction Rate: .41578576
predicted =590, Actual = 1419
 
  308
  1,279
Incorrect Failure Prediction Rate: .24081314
predicted =308, Actual = 1279
===========================================================================
(results regress_3 are active now)
============================================================
Model regress_3 regress unin age military race employed mz_employed mz_military , robust 
============================================================
  2,693
  2,959
Correct Success Prediction Rate: .91010477
predicted =2693, Actual = 2959
  
  251
  2,002
Correct Failure Prediction Rate: .12537463
predicted =251, Actual = 2002
 
  1,751
  2,959
Incorrect Success Prediction Rate: .59175397
predicted =1751, Actual = 2959
 
  266
  2,002
Incorrect Failure Prediction Rate: .13286713
predicted =266, Actual = 2002
===========================================================================
(results logit_3 are active now)
============================================================
Model logit_3 logit unin age military race employed mz_employed mz_military , robust 
============================================================
  2,658
  2,959
Correct Success Prediction Rate: .89827644
predicted =2658, Actual = 2959
  
  258
  1,999
Correct Failure Prediction Rate: .12906453
predicted =258, Actual = 1999
 
  1,741
  2,959
Incorrect Success Prediction Rate: .58837445
predicted =1741, Actual = 2959
 
  301
  1,999
Incorrect Failure Prediction Rate: .15057529
predicted =301, Actual = 1999
===========================================================================
(results probit_3 are active now)
============================================================
Model probit_3 probit unin age military race employed mz_employed mz_military , robust 
============================================================
  2,662
  2,959
Correct Success Prediction Rate: .89962825
predicted =2662, Actual = 2959
  
  264
  1,999
Correct Failure Prediction Rate: .13206603
predicted =264, Actual = 1999
 
  1,735
  2,959
Incorrect Success Prediction Rate: .58634674
predicted =1735, Actual = 2959
 
  297
  1,999
Incorrect Failure Prediction Rate: .14857429
predicted =297, Actual = 1999
===========================================================================

. 
. 
. 
. 
. forval y = 1/3 {
  2.                 matrix accuracy`y' = (predictionregress`y' \ predictionlogit`y' \ predictionprobit`y')
  3.                 
.         matrix colnames accuracy`y' = correct_success correct_failure   inaccurate_success inaccurate_failure
  4.         matrix rownames accuracy`x'`y' = REGRESS LOGIT PROBIT
  5.         putexcel set "prediction.csv", sheet(ROBUST`y') modify
  6.         putexcel A1 = matrix(accuracy`x'`y'), names nformat(number_d2)
  7. 
. }
file prediction.csv saved
file prediction.csv saved
file prediction.csv saved

. 
. 
. 
. log close
      name:  <unnamed>
       log:  C:\Users\rayde\Desktop\uninured_bootstrap3.log
  log type:  text
 closed on:   8 Aug 2019, 21:06:34
--------------------------------------------------------------------------------------------------------------------------------------------------
